/********************************************************************************************************
 * @file	my_resample.c
 *
 * @brief	This is the source file for B91m
 *
 * @author	Driver Group
 * @date	2019
 *
 * @par     Copyright (c) 2019, Telink Semiconductor (Shanghai) Co., Ltd. ("TELINK")
 *          All rights reserved.
 *
 *          Licensed under the Apache License, Version 2.0 (the "License");
 *          you may not use this file except in compliance with the License.
 *          You may obtain a copy of the License at
 *
 *              http://www.apache.org/licenses/LICENSE-2.0
 *
 *          Unless required by applicable law or agreed to in writing, software
 *          distributed under the License is distributed on an "AS IS" BASIS,
 *          WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *          See the License for the specific language governing permissions and
 *          limitations under the License.
 *
 *******************************************************************************************************/
#if __riscv
#include "tl_common.h"

#include "drivers.h"
#endif
#include <math.h>
//#include <stdio.h>
//#include <stdlib.h>

#if __riscv
#include <nds_intrinsic.h>
#include <nds_utils_math.h>
#endif

#include "my_resample.h"

#if (AUDIO_MESH_EN && MESH_AUDIO_RESAMPLE_EN)
#if RESAMPLE_441_TO_48_EN
_attribute_data_dlm_ static short my_src_44to48_sinc[SRC_44to48_DEN * SRC_44to48_FILTER_LEN] = { 2,-6,11,-18,29,-43,61,-83,110,-142,178,-219,263,-311,360,-409,458,-504,547,-584,614,-636,650,32112,650,-636,614,-584,547,-504,458,-409,360,-311,263,
-219,178,-142,110,-83,61,-43,29,-18,11,-6,2,-1,2,-6,11,-18,29,-42,60,-82,108,-139,175,-214,257,-302,348,-394,439,-479,513,-539,551,-537,448,32110,854,
-736,677,-628,580,-530,477,-424,371,-319,270,-224,182,-144,112,-84,62,-43,29,-19,11,-6,2,-1,2,-6,11,-18,28,-42,59,-81,107,-137,171,-209,250,-293,337,
-379,419,-453,480,-494,487,-439,249,32104,1061,-835,741,-673,613,-555,497,-439,382,-328,276,-229,185,-147,114,-86,62,-44,30,-19,11,-6,2,-1,2,-6,11,-18,28,-41,58,-79,105,-134,167,-204,243,-284,325,-364,399,-428,446,-449,424,-341,51,32094,1270,-935,804,-718,646,-580,516,-454,394,-336,283,-233,189,-149,
115,-87,63,-44,30,-19,11,-6,3,-1,2,-6,10,-18,28,-41,58,-78,103,-131,164,-199,237,-275,313,-349,379,-402,413,-404,361,-244,-142,32080,1481,-1036,868,-763,679,-605,535,-468,405,-345,289,-238,192,-152,117,-88,64,-45,30,-19,11,-6,3,-1,2,-5,10,-17,27,-40,57,-77,101,-129,160,-194,230,-266,301,-333,360,-377,379,-359,298,-147,-335,32062,1694,-1136,931,-807,712,-629,554,-483,416,-353,295,-242,195,-154,119,
-89,65,-45,30,-19,11,-6,3,-1,2,-5,10,-17,27,-40,56,-76,99,-126,156,-189,223,-257,289,-318,340,-351,346,-314,235,-50,-525,32041,1910,-1237,995,-851,744,-654,572,-497,427,-361,301,-247,199,-156,120,-90,65,
-46,31,-19,11,-6,3,-1,2,-5,10,-17,27,-39,55,-74,97,-123,152,-184,216,-248,277,-302,320,-325,312,-269,173,44,-712,32015,2127,-1338,1058,-896,777,-678,591,-511,437,-369,307,-251,202,-158,122,-91,66,-46,31,-20,11,-6,3,-1,2,-5,10,-17,26,-38,54,-73,95,-120,148,-178,209,-238,265,-287,300,-299,278,-224,111,139,-897,31985,2347,-1440,1121,-940,809,-702,609,-525,448,-377,313,-256,205,-161,123,-92,66,-46,31,
-20,12,-6,3,-1,2,-5,10,-17,26,-38,53,-71,93,-118,144,-173,202,-229,253,-271,279,-273,245,-180,49,234,-1079,31951,2569,-1541,1184,-984,841,-726,627,-539,458,-385,319,-260,208,-163,125,-93,67,-47,31,-20,12,
-6,3,-1,2,-5,10,-16,25,-37,52,-70,91,-115,140,-168,194,-220,241,-255,259,-247,211,-135,-12,328,-1259,31913,2793,-1643,1247,-1027,873,-750,645,-552,469,-393,325,-264,211,-165,126,-94,68,-47,31,-20,12,
-6,3,-1,2,-5,10,-16,25,-37,51,-69,89,-112,136,-162,187,-210,229,-240,239,-221,177,-91,-74,421,-1436,31872,
3018,-1744,1310,-1071,905,-774,663,-566,479,-400,330,-268,214,-167,127,-95,68,-47,32,-20,12,-6,3,-1,2,-5,9,-16,25,-36,50,-67,87,-109,132,-157,180,
-201,216,-224,219,-195,144,-46,-135,513,-1610,31826,3246,-1846,1373,-1114,936,-797,681,-579,489,-408,336,-272,216,-169,129,-95,69,-48,32,-20,12,-6,3,-1,2,-5,9,-16,24,-35,49,-66,85,-106,128,-151,173,-191,204,-208,199,-170,110,-2,-196,604,-1782,31777,3476,-1947,1435,-1157,967,-820,698,-592,499,-415,341,-276,219,-171,130,-96,69,-48,32,-20,12,-6,3,-1,2,-5,9,-15,24,-35,48,-64,82,-103,124,-146,165,-182,
192,-192,178,-144,77,41,-256,695,-1952,31724,3707,-2049,1497,-1200,998,-843,716,-605,508,-422,346,-280,222,-172,131,-97,70,-48,32,-20,12,-6,3,-1,2,-5,9,-15,23,-34,47,-63,80,-100,120,-140,158,-172,179,-176,158,-118,44,85,-316,785,-2118,31666,3941,
-2151,1559,-1242,1029,-866,733,-618,518,-429,351,-283,224,-174,132,-98,70,-49,32,-20,12,-6,3,-1,2,-5,9,-15,23,-33,46,-61,78,-97,116,-134,151,-162,167,-160,138,-92,10,128,-376,874,-2282,31605,
4176,-2252,1621,-1284,1059,-889,749,-631,527,-436,357,-287,227,-176,133,-99,71,-49,32,-20,12,-6,3,-1,2,-5,9,-15,23,-33,
45,-59,76,-94,112,-129,143,-153,154,-144,118,-66,-22,172,-435,962,-2443,31540,4413,-2353,1682,-1326,
1089,-911,766,-643,536,-443,361,-290,229,-178,135,-99,71,-49,33,-20,12,-6,3,-1,2,-5,9,-14,22,-32,44,-58,74,-90,107,-123,136,-143,142,-128,97,-40,-55,215,-494,1049,-2601,31471,4652,-2455,1743,-1367,1119,-933,782,-655,545,-450,366,-294,232,-179,136,-100,71,-49,33,-21,12,-6,3,-1,2,-4,8,-14,22,-31,43,-56,71,-87,103,-117,128,-133,129,-113,77,-15,-88,258,-553,1136,-2757,31399,4892,-2555,1804,-1408,1148,
-954,798,-667,554,-456,371,-297,234,-181,137,-101,72,-50,33,-21,12,-6,3,-1,2,-4,8,-14,21,-30,42,-55,69,-84,99,-111,121,-123,117,-97,57,10,-120,301,-610,1221,-2910,31322,5134,-2656,1864,-1449,1178,-976,814,-679,563,-463,375,-300,236,
-182,138,-101,72,-50,33,-21,12,-6,3,-1,2,-4,8,-14,21,-30,41,-53,67,-81,94,-106,113,-114,104,-81,37,35,-153,343,-668,1305,-3060,31242,5377,-2757,1924,-1490,1206,-997,830,-690,571,-469,380,-303,238,-184,138,-102,73,-50,33,-21,12,-6,3,-1,2,-4,8,-13,20,-29,40,-52,65,-78,90,-100,105,-104,92,-65,
17,61,-186,385,-725,1389,-3207,31158,5623,-2857,1984,-1530,1235,-1018,845,-702,580,
-475,384,-307,240,-185,139,-102,73,-50,33,-21,12,
-6,3,-1,2,-4,8,-13,20,-28,38,-50,62,-75,86,-94,98,-94,79,-49,-2,86,-218,427,-781,1471,-3351,31070,5869,-2956,2043,-1569,1263,-1038,860,-713,588,-481,388,-309,242,-186,140,-103,73,-50,33,-21,12,-6,3,-1,2,-4,8,-13,19,-28,37,-48,60,-71,81,-88,90,-84,67,-33,-22,111,-250,469,-837,1552,-3493,30978,6117,-3056,2101,-1608,1290,-1058,875,-724,596,-486,392,-312,244,-188,141,-103,73,-50,33,-21,12,-6,3,-1,2,-4,8,
-12,19,-27,36,-47,57,-68,77,-82,83,-74,54,-17,-42,137,-282,510,-893,1633,-3632,30883,6367,-3155,2159,-1647,1318,-1078,889,-734,603,-492,396,-315,246,-189,142,-104,74,-50,33,-21,12,-6,3,-1,2,-4,7,-12,18,-26,35,-45,55,-65,73,-77,75,-64,42,-1,-62,162,-313,551,-947,1712,-3767,30784,6618,-3253,2217,-1685,1345,-1097,903,-745,611,-497,400,-317,248,-190,142,-104,74,-51,33,-21,12,-6,3,-1,2,-4,7,-12,18,-25,34,
-43,53,-61,68,-71,67,-55,29,13,-82,186,-345,591,-1002,1790,-3900,30681,6870,-3351,2273,-1723,1371,-1116,917,-755,618,-502,404,-320,249,-191,143,-104,74,-51,33,-21,12,-6,3,-1,1,-4,7,-12,17,-24,33,-42,50,-58,64,-65,60,-45,17,29,-102,211,-376,631,-1055,
1866,-4030,30575,7123,-3448,2330,-1760,1397,-1135,931,-765,625,-507,407,-322,251,-192,143,-104,74,-51,33,-21,12,-6,3,-1,1,-4,7,-11,17,-24,31,-40,48,-55,59,-59,52,-35,4,45,-121,236,-407,671,-1108,1942,-4158,30465,7378,-3545,2386,-1797,1423,-1154,944,-774,632,-512,411,-325,252,-193,144,-105,74,-51,33,
-21,12,-6,3,-1,1,-4,7,-11,16,-23,30,-38,46,-52,55,-53,44,-25,-7,60,-141,260,-438,711,-1160,2017,-4282,30351,7634,-3641,2441,-1833,1448,-1172,957,-784,639,-517,414,-327,254,-193,144,-105,74,-51,33,-21,12,-6,3,-1,1,-3,6,-11,16,-22,29,-36,43,-48,50,-47,37,-16,-19,76,-160,284,-468,750,-1212,2090,-4403,30234,7891,-3736,2495,-1869,1473,-1189,970,-793,645,-521,417,-329,255,-194,145,-105,74,-51,33,-21,12,-6,3,-1,1,-3,6,
-10,15,-21,28,-35,41,-45,46,-41,29,-6,-32,91,-179,308,-498,788,-1263,2162,-4522,30113,8149,-3831,2549,-1904,1497,-1206,982,-801,652,-526,420,-331,256,-195,145,-105,74,-51,33,-20,12,-6,3,-1,1,-3,6,-10,15,-21,27,-33,38,-42,41,-36,22,3,-44,106,-198,332,-528,826,-1313,2233,-4637,29989,8409,-3925,2602,-1938,1521,-1223,994,-810,658,-530,422,-332,257,-195,145,-105,74,-50,33,-20,12,-6,3,-1,1,-3,6,-10,14,-20,26,-31,36,-38,37,-30,14,13,-56,122,-217,356,-558,864,-1363,2302,-4750,29861,8669,-4018,2655,-1972,1544,-1240,1006,-818,663,
-534,425,-334,258,-196,146,-105,74,-50,33,-20,12,-6,3,-1,1,-3,6,-9,14,-19,24,-29,33,-35,32,-24,6,22,-68,137,-236,379,-587,901,-1411,2371,-4860,29730,8930,-4111,2706,-2006,1567,-1256,1017,-826,669,-538,428,-335,259,-196,146,-105,74,-50,33,-20,12,-6,3,-1,1,-3,6,-9,13,-18,23,-28,31,-32,28,-18,0,32,-80,152,-255,
402,-616,938,-1460,2438,-4966,29595,9192,-4202,2757,-2038,1589,-1271,
1028,-834,674,-541,430,-337,260,-197,146,-105,74,-50,33,-20,12,-6,3,-1,1,-3,5,
-9,13,-17,22,-26,29,-28,24,-12,-8,41,-92,167,-274,425,-645,974,-1507,2503,-5070,29457,9455,-4293,2808,-2071,
1611,-1286,1039,-841,679,-545,432,-338,261,-197,146,-105,74,-50,33,-20,11,-6,3,-1,1,-3,5,-8,12,-16,21,-24,26,-25,19,-6,-15,51,-104,182,-292,448,-673,1010,-1553,2568,-5171,29315,9719,-4383,2857,-2102,1632,-1301,1049,-848,684,-548,434,-339,261,-197,146,-105,74,-50,32,-20,11,-6,2,-1,1,-3,5,-8,12,-16,19,-23,24,-22,15,-1,-23,60,-116,197,-310,471,-701,1045,-1599,2631,-5269,29170,9983,-4472,2906,-2133,1653,-1316,1059,-855,689,-551,436,-340,262,-198,146,-105,74,-50,32,-20,11,-6,2,-1,1,-3,5,-8,11,-15,18,-21,21,-18,10,4,-30,70,-128,
211,-328,493,-729,1080,-1644,2693,-5364,29022,10248,-4559,2953,-2163,1673,-1329,1069,-862,693,-553,438,-341,262,-198,146,-105,73,-50,32,-20,11,-6,2,-1,1,-2,5,-7,11,-14,17,-19,19,-15,6,10,-37,79,-140,226,-346,515,-756,1114,-1688,2753,-5456,28871,10514,-4646,3000,-2192,1693,-1343,1078,-868,697,-556,439,-342,262,-198,146,-105,73,-49,32,-20,11,-6,2,-1,1,-2,4,-7,10,-13,16,-17,16,-12,1,16,-45,88,-151,240,-364,537,-783,1148,-1732,2812,-5545,28716,10780,-4732,3046,-2221,1712,-1356,1087,-874,701,-558,440,-343,263,-198,145,-104,73,-49,
32,-19,11,-6,2,-1,1,-2,4,-7,10,-12,15,-16,14,-8,-2,21,-52,98,-163,254,-381,558,-810,1181,-1774,2870,-5631,28558,11047,-4816,3091,-2249,1731,-1368,1095,-879,705,-561,442,-343,263,-197,145,-104,73,-49,31,-19,11,-6,2,-1,1,-2,4,-6,9,-12,13,-14,12,-5,-6,27,-59,107,-174,268,-399,580,-836,1214,-1816,2926,-5714,28397,11315,-4899,3136,-2276,1748,-1380,1103,-885,708,-563,443,-344,263,-197,145,-104,72,-49,31,-19,11,-6,2,-1,1,-2,4,-6,8,-11,12,-12,9,-2,-11,33,-67,116,-186,282,-416,601,-861,1246,-1857,2981,-5795,28232,11583,-4982,3179,-2303,
1766,-1392,1111,-890,711,-564,444,-344,263,-197,144,-103,72,-48,31,-19,11,-5,2,-1,1,-2,4,-6,8,-10,11,-10,7,0,-15,38,-74,125,-197,296,-433,621,-887,1277,-1897,3034,-5872,28065,11851,-5062,3221,-2329,1783,-1403,1118,-894,
714,-566,444,-344,263,-197,144,-103,71,-48,31,-19,11,-5,2,0,1,-2,4,-5,7,-9,10,-9,4,4,-19,44,-81,134,-208,310,-450,642,-912,1308,-1936,3086,-5946,27894,12119,-5142,3262,-2354,1799,-1413,1125,-899,716,-567,445,-344,262,-196,144,-102,71,-48,31,-19,10,-5,2,0,1,-2,3,-5,7,-8,9,-7,2,7,-24,50,-88,143,-219,324,-466,662,-936,1338,-1974,3136,-6018,27721,12388,-5220,3303,-2378,1814,-1423,1131,-903,719,-569,445,-344,262,-196,143,-102,71,-47,30,-18,10,-5,2,0,1,-2,3,-5,6,-7,7,-5,0,10,-28,55,-95,152,-230,337,-482,682,-960,1368,-2011,3185,-6086,27544,12657,
-5297,3342,-2402,1829,-1433,1138,-906,721,-569,445,-344,261,-195,142,-101,70,-47,30,-18,10,-5,2,0,1,-2,3,-4,6,-7,6,-3,-2,13,-32,61,-102,160,-241,350,-498,701,-984,1397,-2048,3233,-6152,27365,12927,-5373,3380,-2424,1843,-1442,1143,-910,723,-570,446,
-344,261,-194,142,-101,70,-46,30,-18,10,-5,2,0,0,-1,3,-4,5,-6,5,-2,-4,17,-36,66,-109,169,-251,363,-514,720,-1007,1425,-2083,3279,-6214,27182,13196,-5447,3417,-2446,1857,-1451,1148,-913,724,-571,445,-343,260,-194,141,-100,69,-46,29,-18,10,-5,2,0,0,-1,3,-4,5,-5,4,0,-7,20,-40,71,-116,177,-262,376,-530,739,-1030,1453,-2118,3324,-6274,26997,13465,-5520,3453,-2467,1870,-1459,1153,-916,725,-571,445,-343,259,-193,140,-100,69,-46,29,-18,10,-5,2,0,0,-1,2,-3,4,-4,2,1,-9,23,-45,77,-122,186,-272,389,-545,757,-1052,1480,-2151,3367,-6331,26809,13735,-5591,
3488,-2487,1882,-1466,1158,-918,726,-571,445,-342,259,-192,140,-99,68,-45,29,-17,10,-5,2,0,0,-1,2,-3,4,-3,1,2,-11,26,-49,82,-129,194,-283,401,-560,776,-1074,1506,-2184,3408,-6385,26618,14004,-5661,3522,-2507,1894,-1473,1162,-920,727,-571,444,-341,258,-191,139,-98,67,-45,28,-17,9,-5,2,0,0,-1,2,-3,3,-3,0,4,-14,29,-53,87,-136,203,-293,413,-575,793,-1095,1532,-2216,3448,-6436,26424,14274,-5729,3555,-2525,1905,-1480,1165,-922,728,-571,443,-340,257,-190,138,-97,67,-44,28,-17,9,-5,2,0,0,-1,2,-2,3,-2,0,6,-16,32,-57,92,-142,211,-303,426,-590,811,-1116,
1557,-2246,3487,-6484,26228,14543,-5795,3586,-2543,1915,-1486,1169,-923,
728,-570,442,-339,255,-189,137,-96,66,-44,28,-17,9,-5,2,0,0,-1,2,-2,2,-1,-1,8,-18,35,-61,98,-149,219,-313,438,-604,828,-1137,1582,-2276,3524,-6530,26028,14812,-5860,3617,-2560,1925,-1491,1171,-924,728,-570,441,-338,254,-188,136,-96,65,-43,27,-16,9,-4,2,0,0,-1,1,-2,2,0,-2,9,-21,38,-65,103,-155,227,-322,449,-618,845,-1157,1606,-2305,3560,-6572,25827,15080,-5923,3646,-2575,1934,-1496,1174,-925,727,-569,440,-336,253,-186,135,-95,65,-43,27,-16,9,-4,2,0,0,-1,1,-2,1,0,-4,11,-23,41,-69,108,-162,235,-332,461,-632,861,-1176,1629,-2333,3594,-6612,25622,
15349,-5985,3674,-2590,1942,-1500,1175,-925,727,-567,439,-335,251,-185,133,-94,64,-42,26,-16,9,-4,2,0,0,-1,1,-1,1,0,-5,12,-25,44,-73,113,-168,242,-341,472,-645,877,-1195,1651,-2360,3626,-6649,25415,15617,-6044,3700,-2604,1950,-1504,1177,-925,726,-566,437,-333,250,-184,132,-93,63,-41,26,-15,8,-4,2,0,0,-1,1,-1,0,1,-6,14,-27,47,-77,118,-174,250,-350,483,-659,893,-1213,1673,-2386,3657,-6683,25206,15885,-6102,3726,-2618,1956,-1507,1178,-925,725,-564,435,-331,248,-182,131,-92,62,-41,26,-15,8,-4,2,0,0,0,1,-1,0,2,-7,16,-30,50,-80,123,-180,257,-360,494,
-671,908,-1231,1694,-2410,3687,-6714,24994,16152,-6158,3750,-2630,1963,-1510,1178,-924,723,-563,433,-329,246,-181,130,-91,61,-40,25,-15,8,-4,1,0,0,0,1,0,0,3,-8,17,-32,53,-84,127,-186,265,-369,505,-684,923,-1249,1714,-2434,3715,-6743,24780,16418,-6213,3773,-2641,1968,-1512,1179,-923,722,-561,431,-327,244,-179,128,-90,61,-40,25,-14,8,-4,1,0,0,0,0,0,0,4,-9,19,-34,56,-88,132,-192,272,-377,515,-697,937,-1266,1734,-2457,3741,-6769,24563,16684,-6265,3795,-2651,1973,-1514,1178,-922,720,-558,429,-325,242,-177,127,-88,60,-39,24,-14,8,-4,1,0,0,0,0,0,-1,4,-10,
20,-36,59,-92,137,-198,279,-386,526,-709,951,-1282,1753,-2479,3766,-6792,24344,16950,-6316,3815,-2661,1977,-1515,1178,-920,717,-556,426,-323,240,-176,125,-87,59,-38,24,-14,7,-4,1,0,0,0,0,0,-2,5,-12,22,-38,62,-95,141,-204,286,-394,536,-720,965,-1298,1771,-2500,3789,-6812,24123,17214,-6364,3834,-2669,1980,-1515,1176,-918,715,-553,424,-320,238,-174,124,-86,58,-37,23,-13,7,-3,1,0,0,0,0,0,-2,6,-13,24,-40,65,-99,146,-209,293,-403,545,-732,978,-1313,1789,-2520,
3811,-6830,23900,17478,-6411,3852,-2677,1983,-1515,1175,-915,712,-550,421,-318,236,-172,122,-85,57,-37,23,-13,7,-3,1,0,0,0,0,0,-2,7,-14,25,-42,67,-102,150,-215,300,-411,555,-743,991,-1328,1805,-2539,3831,-6845,23674,17741,-6455,3868,-2683,1985,-1514,1173,-913,709,-547,418,-315,234,-170,121,-83,56,-36,22,-13,7,-3,1,0,0,0,0,1,-3,7,-15,27,-44,70,-106,155,-220,306,-419,564,-754,1004,-1342,1822,-2556,3850,-6857,23446,18004,-6498,3883,-2689,1986,-1513,1170,-909,705,-544,415,-312,231,-168,119,-82,55,-35,22,-12,7,-3,1,0,0,0,0,1,-3,8,-16,28,-46,73,-109,159,-226,
313,-426,573,-764,1016,-1356,1837,-2573,3867,-6866,23217,18265,-6538,3897,-2694,1986,-1511,1167,-906,702,-540,412,-309,229,-166,117,-81,54,-34,21,-12,6,-3,1,0,0,0,0,1,-4,9,-17,30,-48,75,-113,163,-231,319,-434,582,-775,1028,-1369,1851,-2589,3883,-6873,22985,18525,-6577,3909,-2697,1986,-1509,1164,-902,698,-536,408,-306,226,-163,115,-79,53,-34,21,-12,6,-3,1,0,0,0,0,2,-4,10,-18,31,-50,78,-116,168,-236,325,-441,591,-785,1039,-1381,1865,-2604,3897,-6878,22751,18785,-6613,3920,-2700,1985,-1506,1160,-898,694,-533,405,-303,223,-161,114,-78,52,-33,20,-11,6,-3,1,0,0,0,0,2,
-5,10,-19,32,-52,80,-119,172,-241,331,-448,599,-794,1050,-1393,1878,-2617,3910,-6880,22515,19043,-6647,3930,-2701,1983,-1503,1156,-893,689,-528,401,-300,220,-159,112,-76,51,-32,19,-11,6,-2,1,0,0,0,0,2,-5,11,-20,34,-54,83,-123,176,-246,337,-455,607,-803,1060,-1405,1891,-2630,3921,-6879,22278,19300,-6679,3938,-2702,1980,-1498,1151,-888,685,-524,397,-296,218,-156,110,-75,49,-31,19,-11,5,-2,1,0,0,0,-1,2,-6,12,-21,35,-56,85,-126,180,-251,343,-462,615,-812,1070,-1416,1902,-2642,3931,-6876,22038,19556,-6708,3944,-2702,1977,-1494,1146,-883,680,-519,393,-293,215,-154,108,-73,
48,-30,18,-10,5,-2,1,0,0,0,-1,3,-6,12,-22,37,-58,88,-129,184,-255,349,-469,623,-821,1080,-1426,1913,-2652,3939,-6870,21797,19811,-6735,3950,-2700,1973,-1489,1140,-878,674,-515,388,-289,211,-151,106,-72,47,-30,18,-10,5,-2,1,0,0,0,-1,3,-7,13,-23,38,-60,90,-132,187,-260,354,-475,630,-829,1089,-1436,1923,-2662,3945,-6861,21554,20064,-6761,3953,-2698,1968,-1483,1134,-872,669,-510,384,-285,208,-149,104,-70,46,-29,
17,-9,5,-2,0,0,0,0,-1,3,-7,14,-24,39,-62,93,-135,191,-265,360,-481,637,-837,1097,-1445,1932,-2670,3950,-6851,21310,20316,-6783,3956,-2694,1962,-1476,1128,-866,663,-504,379,-281,205,-146,102,-69,45,-28,16,-9,4,-2,0,0,0,0,-1,4,-8,14,-25,41,-63,95,-138,195,-269,365,-487,644,-845,1106,-1454,1941,-2678,3954,-6837,21064,20567,-6804,3957,-2690,1956,-1469,1121,-859,657,-499,375,-277,202,-143,99,-67,43,-27,16,-8,4,-2,0,0,0,0,-1,4,-8,15,-26,42,-65,97,-141,198,-273,370,-493,651,-852,1113,-1462,1949,-2684,3956,-6822,20816,20816,-6822,3956,-2684,1949,-1462,1113,-852,651,-493,370,-273,
198,-141,97,-65,42,-26,15,-8,4,-1,0,0,0,0,-2,4,-8,16,-27,43,-67,99,-143,202,-277,375,-499,657,-859,1121,-1469,1956,-2690,3957,-6804,20567,21064,-6837,3954,-2678,1941,-1454,1106,-845,644,-487,365,-269,195,-138,95,-63,41,-25,14,-8,4,-1,0,0,0,0,-2,4,-9,16,-28,45,-69,102,-146,205,-281,379,-504,663,-866,1128,-1476,1962,-2694,3956,-6783,20316,21310,-6851,3950,-2670,1932,-1445,1097,-837,637,-481,360,-265,191,-135,93,-62,39,-24,14,-7,3,-1,0,0,0,0,-2,5,-9,17,-29,46,-70,104,-149,208,-285,384,-510,669,-872,1134,-1483,1968,-2698,3953,-6761,20064,21554,-6861,3945,-2662,1923,-1436,1089,-829,
630,-475,354,-260,187,-132,90,-60,38,-23,13,-7,3,-1,0,0,0,1,-2,5,-10,18,-30,47,-72,106,-151,211,-289,388,-515,674,-878,1140,-1489,1973,-2700,3950,-6735,19811,21797,-6870,3939,-2652,1913,-1426,1080,-821,623,-469,349,-255,184,-129,88,-58,37,-22,12,-6,3,-1,0,0,0,1,-2,5,-10,18,-30,48,-73,108,-154,215,-293,393,-519,680,-883,1146,-1494,1977,-2702,3944,-6708,19556,22038,-6876,3931,-2642,1902,-1416,1070,-812,615,-462,343,-251,180,-126,85,-56,35,-21,12,-6,2,-1,0,0,0,1,-2,5,-11,19,-31,49,-75,110,-156,218,-296,397,-524,685,-888,1151,-1498,1980,-2702,3938,-6679,19300,22278,-6879,3921,-2630,
1891,-1405,1060,-803,607,-455,337,-246,176,-123,83,-54,34,-20,11,-5,2,0,0,0,0,1,-2,6,-11,19,-32,51,-76,112,-159,220,-300,401,-528,689,-893,1156,-1503,1983,-2701,3930,-6647,19043,22515,-6880,3910,-2617,1878,-1393,1050,-794,599,-448,331,-241,172,-119,80,-52,32,-19,10,-5,2,0,0,0,0,1,-3,6,-11,20,-33,52,-78,114,-161,223,-303,405,-533,694,-898,1160,-1506,1985,-2700,3920,-6613,18785,22751,-6878,3897,-2604,1865,-1381,1039,-785,591,-441,325,-236,168,-116,78,-50,31,-18,10,-4,2,0,0,0,0,1,-3,6,-12,21,-34,53,-79,115,-163,
226,-306,408,-536,698,-902,1164,-1509,1986,-2697,3909,-6577,18525,22985,-6873,3883,-2589,1851,-1369,1028,-775,582,-434,319,-231,163,-113,75,-48,30,-17,9,-4,1,0,0,0,0,1,-3,6,-12,21,-34,54,-81,117,-166,229,-309,412,-540,702,-906,1167,-1511,1986,-2694,3897,-6538,18265,23217,-6866,3867,-2573,1837,-1356,1016,-764,573,-426,313,-226,159,-109,73,-46,28,-16,8,-3,1,0,0,0,0,1,-3,7,-12,22,-35,55,-82,119,-168,231,-312,415,-544,705,-909,1170,-1513,1986,-2689,3883,-6498,18004,23446,-6857,3850,-2556,1822,-1342,1004,-754,564,-419,306,-220,155,-106,70,-44,27,-15,7,-3,1,0,0,0,0,1,-3,7,-13,22,-36,56,
-83,121,-170,234,-315,418,-547,709,-913,1173,-1514,1985,-2683,3868,-6455,17741,23674,-6845,3831,-2539,1805,-1328,991,-743,555,-411,300,-215,150,-102,67,-42,25,-14,7,-2,0,0,0,0,0,1,-3,7,-13,23,-37,57,-85,122,-172,236,-318,421,-550,712,-915,1175,-1515,1983,-2677,3852,-6411,17478,23900,-6830,3811,-2520,1789,-1313,978,-732,545,-403,293,-209,146,-99,65,-40,24,-13,6,-2,0,0,0,0,0,1,-3,7,-13,23,-37,58,-86,124,-174,238,-320,424,-553,715,-918,1176,-1515,1980,-2669,3834,-6364,17214,24123,-6812,3789,-2500,1771,-1298,965,-720,536,-394,286,-204,141,-95,62,-38,22,-12,5,-2,0,0,0,0,0,1,-4,7,-14,24,
-38,59,-87,125,-176,240,-323,426,-556,717,-920,1178,-1515,1977,-2661,3815,-6316,16950,24344,-6792,3766,-2479,1753,-1282,951,-709,526,-386,279,-198,137,-92,59,-36,20,-10,4,-1,0,0,0,0,0,1,-4,8,-14,24,-39,60,-88,127,-177,242,-325,429,-558,720,-922,1178,-1514,1973,-2651,3795,-6265,16684,24563,-6769,3741,-2457,1734,-1266,937,-697,515,-377,272,-192,132,-88,56,-34,19,-9,4,0,0,0,0,0,0,1,-4,8,-14,25,-40,61,-90,128,-179,244,-327,431,-561,722,-923,1179,-1512,1968,-2641,3773,-6213,16418,24780,-6743,3715,-2434,1714,-1249,923,-684,505,-369,265,-186,127,-84,53,-32,17,-8,3,0,0,1,0,0,0,1,-4,8,-15,25,
-40,61,-91,130,-181,246,-329,433,-563,723,-924,1178,-1510,1963,-2630,3750,-6158,16152,24994,-6714,3687,-2410,1694,-1231,908,-671,494,-360,257,-180,123,-80,50,-30,16,-7,2,0,-1,1,0,0,0,2,-4,8,-15,26,-41,62,-92,131,-182,248,-331,435,-564,725,-925,1178,-1507,1956,-2618,3726,-6102,15885,25206,-6683,3657,-2386,1673,-1213,893,-659,483,-350,250,-174,118,-77,47,-27,14,-6,1,0,-1,1,-1,0,0,2,-4,8,-15,26,-41,63,-93,132,-184,250,-333,437,-566,726,-925,1177,-1504,1950,-2604,3700,-6044,15617,25415,-6649,3626,
-2360,1651,-1195,877,-645,472,-341,242,-168,113,-73,44,-25,12,-5,0,1,-1,1,-1,0,0,2,-4,9,-16,26,-42,64,-94,133,-185,251,-335,439,-567,727,-925,1175,-1500,1942,-2590,3674,-5985,15349,25622,-6612,3594,-2333,1629,-1176,861,-632,461,-332,235,-162,108,-69,41,-23,11,-4,0,1,-2,1,-1,0,0,2,-4,9,-16,27,-43,65,-95,135,-186,253,-336,440,-569,727,-925,1174,-1496,1934,-2575,3646,-5923,15080,25827,-6572,3560,-2305,1606,-1157,845,-618,449,-322,227,-155,103,-65,38,-21,9,-2,0,2,-2,1,-1,0,0,2,-4,9,-16,27,-43,65,-96,136,-188,254,-338,441,-570,728,-924,1171,-1491,1925,-2560,3617,-5860,14812,26028,-6530,3524,
-2276,1582,-1137,828,-604,438,-313,219,-149,98,-61,35,-18,8,-1,-1,2,-2,2,-1,0,0,2,-5,9,-17,28,-44,66,-96,137,-189,255,-339,442,-570,728,-923,1169,-1486,1915,-2543,3586,-5795,14543,26228,-6484,3487,-2246,1557,-1116,811,-590,426,-303,211,-142,92,-57,32,-16,6,0,-2,3,-2,2,-1,0,0,2,-5,9,-17,28,-44,67,-97,138,-190,257,-340,443,-571,728,-922,1165,-1480,1905,-2525,3555,-5729,14274,26424,-6436,3448,-2216,1532,
-1095,793,-575,413,-293,203,-136,87,-53,29,-14,4,0,-3,3,-3,2,-1,0,0,2,-5,9,-17,28,-45,67,-98,139,-191,258,-341,444,-571,727,-920,1162,-1473,1894,-2507,3522,-5661,14004,26618,-6385,3408,-2184,
1506,-1074,776,-560,401,-283,194,-129,82,-49,26,-11,2,1,-3,4,-3,2,-1,0,0,2,-5,10,-17,29,-45,68,-99,140,-192,259,-342,445,-571,726,-918,1158,-1466,1882,-2487,3488,-5591,13735,26809,-6331,3367,-2151,1480,-1052,757,-545,389,-272,186,-122,77,-45,23,-9,1,2,-4,4,-3,2,-1,0,0,2,-5,10,-18,29,-46,69,-100,140,-193,259,-343,445,-571,725,-916,1153,-1459,1870,-2467,3453,-5520,13465,26997,-6274,3324,-2118,1453,-1030,739,-530,376,-262,177,-116,71,-40,20,-7,0,4,-5,5,-4,3,-1,0,0,2,-5,10,-18,29,-46,69,-100,141,-194,260,-343,445,
-571,724,-913,1148,-1451,1857,-2446,3417,-5447,13196,27182,-6214,3279,-2083,1425,
-1007,720,-514,363,-251,169,-109,66,-36,17,-4,-2,5,-6,5,-4,3,-1,0,0,2,-5,10,-18,30,-46,70,-101,142,-194,261,-344,446,-570,723,-910,1143,-1442,1843,-2424,3380,-5373,12927,27365,-6152,3233,-2048,1397,-984,701,-498,350,-241,160,-102,61,-32,13,-2,-3,6,-7,6,-4,3,-2,1,0,2,-5,10,-18,30,-47,70,-101,142,-195,261,-344,445,-569,721,-906,1138,-1433,1829,-2402,3342,-5297,12657,27544,-6086,3185,-2011,1368,-960,682,-482,337,-230,152,-95,55,-28,10,0,-5,7,-7,6,-5,3,-2,1,0,2,-5,10,-18,30,-47,
71,-102,143,-196,262,-344,445,-569,719,-903,1131,-1423,1814,-2378,3303,-5220,12388,27721,-6018,3136,-1974,1338,-936,662,-466,324,-219,143,-88,50,-24,7,2,-7,9,-8,7,-5,3,-2,1,0,2,-5,10,-19,31,-48,71,-102,144,-196,262,-344,445,-567,716,-899,1125,-1413,1799,-2354,3262,-5142,12119,27894,-5946,3086,-1936,1308,-912,642,-450,310,-208,134,-81,44,-19,4,4,-9,10,-9,7,-5,4,-2,1,0,2,-5,11,-19,31,-48,71,
-103,144,-197,263,-344,444,-566,714,-894,1118,-1403,1783,-2329,3221,-5062,11851,28065,-5872,3034,-1897,1277,-887,621,-433,296,-197,125,-74,38,-15,0,7,-10,11,-10,8,-6,4,-2,1,-1,2,-5,11,-19,31,-48,72,
-103,144,-197,263,-344,444,-564,711,-890,1111,-1392,1766,-2303,3179,-4982,11583,28232,-5795,2981,-1857,1246,-861,601,-416,282,-186,116,-67,33,-11,-2,9,-12,12,-11,8,-6,4,-2,1,-1,2,-6,11,-19,31,-49,72,-104,145,-197,263,-344,443,-563,708,-885,1103,-1380,1748,-2276,3136,-4899,11315,28397,-5714,2926,-1816,1214,-836,580,-399,268,-174,107,-59,27,-6,-5,12,-14,13,-12,9,-6,4,-2,1,-1,2,-6,11,-19,31,-49,73,-104,145,-197,263,-343,442,-561,705,-879,1095,-1368,1731,-2249,3091,-4816,11047,28558,-5631,2870,-1774,1181,-810,558,-381,254,-163,98,-52,21,-2,-8,14,-16,15,-12,10,-7,4,-2,1,-1,2,-6,11,-19,32,
-49,73,-104,145,-198,263,-343,440,-558,701,-874,1087,-1356,1712,-2221,3046,-4732,10780,28716,-5545,2812,-1732,1148,-783,537,-364,240,-151,88,-45,16,1,-12,16,-17,16,-13,10,-7,4,-2,1,-1,2,-6,11,-20,32,-49,73,-105,146,-198,262,-342,439,-556,697,-868,1078,-1343,1693,-2192,3000,-4646,10514,28871,-5456,2753,-1688,1114,-756,515,-346,226,-140,79,-37,10,6,-15,19,-19,17,-14,11,-7,5,-2,1,-1,2,-6,11,-20,32,-50,73,-105,146,-198,262,-341,438,-553,693,-862,1069,-1329,1673,-2163,2953,-4559,10248,29022,-5364,2693,-1644,1080,-729,493,-328,211,-128,70,-30,4,10,-18,21,-21,18,-15,11,-8,5,-3,1,-1,2,-6,11,
-20,32,-50,74,-105,146,-198,262,-340,436,-551,689,-855,1059,-1316,1653,-2133,2906,-4472,9983,29170,-5269,2631,-1599,1045,-701,471,-310,197,-116,60,-23,-1,15,-22,24,-23,19,-16,12,-8,5,-3,1,-1,2,-6,11,-20,32,-50,74,-105,146,-197,261,-339,434,-548,684,-848,1049,-1301,1632,-2102,2857,-4383,9719,29315,-5171,2568,-1553,1010,-673,448,-292,182,-104,51,-15,-6,19,-25,26,-24,21,-16,12,-8,5,-3,1,-1,3,-6,11,-20,33,-50,74,-105,146,-197,261,-338,432,-545,679,-841,1039,-1286,1611,-2071,2808,-4293,9455,29457,-5070,2503,-1507,974,-645,425,-274,167,-92,41,-8,-12,24,-28,29,-26,22,-17,13,
-9,5,-3,1,-1,3,-6,12,-20,33,-50,74,-105,146,-197,260,-337,430,-541,674,
-834,1028,-1271,1589,-2038,2757,-4202,9192,29595,-4966,2438,-1460,938,-616,402,-255,152,-80,32,0,-18,28,-32,31,-28,23,-18,13,-9,6,-3,1,-1,3,-6,12,-20,33,-50,74,-105,146,-196,259,-335,428,-538,669,-826,1017,-1256,1567,-2006,2706,-4111,8930,29730,-4860,2371,-1411,901,-587,379,-236,137,-68,22,6,-24,32,-35,33,-29,24,-19,14,-9,6,-3,1,-1,3,-6,12,-20,33,-50,74,-105,146,-196,258,-334,425,-534,663,-818,1006,-1240,1544,-1972,2655,-4018,8669,29861,-4750,2302,
-1363,864,-558,356,-217,122,-56,13,14,-30,37,-38,36,-31,26,-20,14,-10,6,-3,1,-1,3,-6,12,-20,33,-50,74,-105,145,-195,257,-332,422,-530,658,
-810,994,-1223,1521,-1938,2602,-3925,8409,29989,-4637,2233,-1313,826,-528,332,-198,106,-44,3,22,-36,41,-42,38,-33,27,-21,15,-10,6,-3,1,-1,3,-6,12,-20,33,-51,74,-105,145,-195,256,-331,420,-526,652,-801,982,-1206,1497,-1904,2549,-3831,8149,30113,-4522,2162,-1263,788,-498,308,-179,91,-32,-6,29,-41,46,-45,41,-35,28,-21,15,-10,6,-3,1,-1,3,-6,12,-21,33,-51,74,-105,145,-194,255,-329,417,-521,645,-793,970,-1189,1473,-1869,2495,-3736,7891,30234,-4403,2090,-1212,750,-468,284,-160,76,-19,-16,37,-47,50,-48,43,-36,29,-22,16,-11,6,-3,1,
-1,3,-6,12,-21,33,-51,74,-105,144,-193,254,-327,414,-517,639,
-784,957,-1172,1448,-1833,2441,-3641,7634,30351,-4282,2017,-1160,711,-438,260,-141,60,-7,-25,44,-53,55,-52,46,-38,30,-23,16,-11,7,-4,1,-1,3,-6,12,-21,33,-51,74,-105,144,-193,252,-325,411,-512,632,-774,944,-1154,1423,-1797,2386,-3545,7378,30465,-4158,1942,-1108,671,-407,236,-121,45,4,-35,52,-59,59,-55,48,-40,31,-24,17,-11,7,-4,1,-1,3,-6,12,-21,33,-51,74,-104,143,-192,251,-322,407,-507,625,-765,931,-1135,1397,-1760,2330,-3448,7123,30575,-4030,1866,-1055,631,-376,211,-102,29,17,-45,60,-65,64,-58,50,-42,33,-24,17,-12,7,-4,1,-1,3,-6,12,-21,33,-51,74,-104,143,-191,249,-320,404,
-502,618,-755,917,-1116,1371,-1723,2273,-3351,6870,30681,-3900,1790,-1002,591,-345,186,-82,13,29,-55,67,-71,68,-61,53,-43,34,-25,18,-12,7,-4,2,-1,3,-6,12,-21,33,-51,74,-104,142,-190,248,-317,400,-497,611,-745,903,-1097,1345,-1685,2217,-3253,6618,30784,-3767,1712,-947,551,-313,162,-62,-1,42,-64,75,-77,73,-65,55,-45,35,-26,18,-12,7,-4,2,-1,3,-6,12,-21,33,-50,74,-104,142,-189,246,-315,396,-492,603,-734,889,-1078,1318,-1647,2159,-3155,6367,30883,
-3632,1633,-893,510,-282,137,-42,-17,54,-74,83,-82,77,-68,57,-47,36,-27,19,-12,8,-4,2,-1,3,-6,12,-21,33,-50,73,-103,141,-188,244,-312,392,-486,596,-724,875,-1058,1290,-1608,2101,-3056,6117,30978,-3493,1552,-837,
469,-250,111,-22,-33,67,-84,90,-88,81,-71,60,-48,37,-28,19,-13,8,-4,2,-1,3,-6,12,-21,33,-50,73,-103,140,-186,242,-309,388,-481,588,-713,860,-1038,1263,-1569,2043,-2956,5869,31070,-3351,1471,-781,427,-218,86,-2,-49,79,-94,98,-94,86,-75,62,-50,38,-28,20,-13,8,-4,2,-1,3,-6,12,-21,33,-50,73,-102,139,-185,240,-307,384,-475,580,-702,845,-1018,1235,-1530,1984,-2857,5623,31158,-3207,1389,-725,385,-186,61,17,-65,92,-104,105,
-100,90,-78,65,-52,40,-29,20,-13,8,-4,2,-1,3,-6,12,-21,33,-50,73,-102,138,-184,238,-303,380,-469,571,-690,830,-997,1206,-1490,1924,-2757,5377,31242,-3060,1305,-668,343,-153,35,37,-81,104,-114,113,-106,94,-81,67,-53,41,-30,21,-14,8,-4,2,-1,3,
-6,12,-21,33,-50,72,-101,138,-182,236,-300,375,-463,563,-679,814,-976,1178,-1449,1864,-2656,5134,31322,-2910,1221,-610,301,-120,10,57,-97,117,-123,121,-111,99,-84,69,-55,42,
-30,21,-14,8,-4,2,-1,3,-6,12,-21,33,-50,72,-101,137,-181,234,-297,371,-456,554,-667,798,-954,1148,-1408,1804,-2555,4892,31399,-2757,1136,-553,258,-88,-15,77,-113,129,-133,128,-117,103,-87,71,-56,43,-31,22,-14,8,-4,2,-1,3,-6,12,-21,33,-49,71,-100,136,-179,232,-294,366,-450,545,-655,782,-933,1119,-1367,1743,-2455,4652,31471,-2601,1049,-494,215,-55,-40,97,-128,142,-143,136,-123,107,-90,74,-58,44,-32,22,-14,9,-5,2,-1,3,-6,12,-20,33,-49,71,-99,135,-178,229,-290,361,-443,536,-643,766,-911,1089,-1326,1682,-2353,4413,31540,-2443,962,
-435,172,-22,-66,118,-144,154,-153,143,-129,112,-94,76,-59,45,-33,23,-15,9,-5,2,-1,3,-6,12,-20,32,-49,71,-99,133,-176,227,-287,357,
-436,527,-631,749,-889,1059,-1284,1621,-2252,4176,31605,-2282,874,-376,128,10,-92,138,-160,167,-162,151,-134,116,-97,78,-61,46,-33,23,-15,9,-5,2,-1,3,-6,12,-20,32,-49,70,-98,132,-174,224,-283,351,-429,518,-618,733,-866,1029,-1242,1559,-2151,3941,31666,-2118,785,-316,85,44,-118,158,-176,179,
-172,158,-140,120,-100,80,-63,47,-34,23,-15,9,-5,2,-1,3,-6,12,-20,32,-48,70,-97,131,-172,222,-280,346,-422,508,-605,716,-843,998,-1200,1497,-2049,3707,31724,-1952,695,-256,41,
77,-144,178,-192,192,-182,165,-146,124,-103,82,-64,48,-35,24,-15,9,-5,2,-1,3,-6,12,-20,32,-48,69,-96,130,-171,219,-276,341,-415,499,-592,698,-820,967,-1157,1435,-1947,3476,31777,-1782,604,-196,-2,110,-170,199,-208,204,-191,173,-151,128,-106,85,-66,49,-35,24,-16,9,-5,2,-1,3,-6,12,-20,32,-48,69,-95,129,-169,216,-272,336,-408,489,-579,681,-797,936,-1114,1373,-1846,3246,31826,-1610,513,-135,-46,144,-195,219,-224,216,-201,180,-157,132,-109,87,-67,50,-36,25,-16,9,-5,2,-1,3,-6,12,-20,32,-47,68,-95,127,-167,214,-268,330,-400,479,-566,663,-774,905,-1071,1310,-1744,3018,31872,
-1436,421,-74,-91,177,-221,239,-240,229,-210,187,-162,136,-112,89,-69,51,-37,25,-16,10,-5,2,-1,3,-6,12,-20,31,-47,68,-94,126,-165,211,-264,325,-393,469,-552,645,-750,873,-1027,1247,-1643,2793,31913,-1259,328,-12,-135,211,-247,259,-255,241,-220,194,-168,140,-115,91,-70,52,-37,25,-16,10,-5,2,-1,3,-6,12,-20,31,-47,67,-93,125,-163,208,-260,319,-385,458,-539,627,-726,841,-984,1184,-1541,2569,31951,-1079,234,49,-180,245,-273,279,-271,253,-229,202,-173,144,-118,93,-71,53,-38,26,-17,10,
-5,2,-1,3,-6,12,-20,31,-46,66,-92,123,-161,205,-256,313,-377,448,-525,609,-702,809,-940,1121,-1440,2347,31985,-897,139,111,-224,278,-299,300,-287,265,-238,209,-178,148,-120,95,-73,54,-38,26,-17,10,-5,2,-1,3,-6,11,-20,31,-46,66,-91,122,-158,202,-251,307,-369,437,-511,591,-678,777,-896,1058,-1338,2127,32015,-712,44,173,-269,312,-325,320,-302,277,-248,216,-184,152,-123,97,-74,55,-39,27,-17,10,-5,2,-1,3,-6,11,-19,31,-46,65,-90,120,-156,199,-247,301,-361,427,-497,572,-654,744,-851,995,-1237,1910,32041,-525,
-50,235,-314,346,-351,340,-318,289,-257,223,-189,156,-126,99,-76,56,-40,27,-17,10,-5,2,-1,3,-6,11,-19,30,-45,65,
-89,119,-154,195,-242,295,-353,416,-483,554,-629,712,-807,931,-1136,1694,32062,-335,-147,298,-359,379,-377,360,-333,301,-266,230,-194,160,-129,101,-77,57,-40,27,-17,10,-5,2,-1,3,-6,11,-19,30,-45,64,-88,117,-152,192,-238,289,-345,405,-468,535,-605,679,-763,868,-1036,1481,32080,-142,-244,361,-404,413,-402,379,-349,313,-275,237,-199,164,-131,103,-78,58,-41,28,-18,10,-6,2,-1,3,-6,11,-19,30,-44,63,-87,115,-149,189,-233,283,-336,394,-454,
516,-580,646,-718,804,-935,1270,32094,51,-341,424,-449,446,-428,399,-364,325,-284,243,-204,167,-134,105,-79,58,-41,28,-18,11,-6,2,-1,2,-6,11,-19,30,-44,62,-86,114,-147,185,-229,276,-328,382,-439,497,-555,613,-673,741,-835,1061,32104,249,-439,487,-494,480,-453,419,-379,337,-293,250,-209,171,-137,107,-81,59,-42,28,-18,11,-6,2,-1,2,-6,11,-19,29,-43,62,-84,112,-144,182,-224,270,-319,371,-424,477,-530,580,-628,677,-736,854,32110,448,-537,551,-539,513,
-479,439,-394,348,-302,257,-214,175,-139,108,-82,60,-42,29,-18,11,-6,2, };
#endif

#if RESAMPLE_48_TO_441_EN
_attribute_data_dlm_ static short my_src_48to44_sinc[SRC_48to44_DEN * SRC_48to44_FILTER_LEN] = { -11,39,-85,116,-57,-198,748,-1618,2708,-3800,4613,27852,4613,-3800,2708,-1618,748,-198,-57,116,-85,39,-11,1,-11,39,-84,113,-50,-208,759,-1622,2691,-3733,4416,27851,4811,-3865,2725,-1613,737,-187,-64,119,-86,40,-11,1,-11,39,-82,109,-44,-218,770,-1625,2673,-3667,4221,27846,5011,-3930,2740,-1608,725,-177,-71,123,-87,40,-11,1,-11,38,-81,106,-37,-228,780,-1628,2654,-3599,4026,27838,5211,-3994,2755,-1602,713,-166,-78,126,-89,40,-11,1,-11,38,-80,102,-30,-238,790,-1631,2634,-3531,3834,27827,5413,-4057,2769,-1595,701,-155,-85,130,-90,40,-11,1,-11,38,-78,99,-23,-248,800,-1632,2614,-3462,
    3642,27813,5616,-4119,2782,-1588,689,-144,-92,133,-91,41,-11,1,-11,38,-77,95,-17,-257,809,-1634,2593,-3392,3452,27796,5820,-4180,2795,-1581,676,-133,-99,136,-92,41,-11,1,
-11,37,-76,92,-10,-267,818,-1634,2571,-3322,3263,27776,6025,-4241,2806,-1573,662,-122,-106,140,-93,41,-11,1,-11,37,-74,88,-4,-276,827,-1634,2548,-3252,3076,27752,6231,-4300,2817,-1564,649,-110,-113,143,-94,41,-11,1,-11,36,-73,85,2,-285,835,-1634,2525,-3181,2891,27726,6438,-4359,2826,-1555,635,-99,-120,146,-95,41,-11,1,-11,36,-72,81,8,-294,843,-1633,2501,-3109,2707,27696,6646,-4416,2835,-1545,621,-87,-127,150,-96,41,-11,1,-11,36,-70,78,15,-303,851,-1631,2476,-3037,2524,27663,6855,-4473,2843,-1534,606,-76,-134,153,-97,41,
-11,1,-11,35,-69,74,21,-311,858,-1629,2451,-2964,2343,27627,7065,-4528,2850,-1523,591,-64,-142,156,-98,42,-10,1,-10,35,-67,71,27,-320,
865,-1627,2425,-2891,2164,27588,7276,-4582,2856,-1511,576,-52,-149,159,-99,42,-10,0,-10,35,-66,67,33,-328,871,-1624,2398,-2818,1986,27546,7488,-4636,2861,-1499,561,-40,-156,163,-100,42,-10,0,-10,34,-65,64,40,-336,878,-1620,2371,-2744,1810,27501,7700,-4688,2865,-1486,545,-28,-163,166,-101,42,-10,0,-10,34,-63,61,46,-344,884,-1616,2343,-2670,1636,27453,7914,-4739,2868,-1472,529,-15,-170,169,-102,42,
-10,0,-10,33,-62,57,52,-352,889,-1611,2314,-2596,1463,27402,8128,-4789,2871,-1458,513,-3,-177,172,-103,42,-10,0,-10,33,-60,54,58,-359,894,-1606,2285,-2521,1292,27348,8342,-4838,2872,-1444,497,8,-184,175,-104,42,-10,0,-10,32,-59,50,64,-367,899,-1600,2255,-2446,1123,27291,8558,-4885,2872,-1428,480,21,-191,178,-105,42,-10,0,-10,32,-57,47,69,-374,904,-1594,2225,-2371,956,27230,8773,-4931,2872,-1413,463,33,-198,181,-106,42,-10,0,-10,32,-56,43,75,-381,908,-1587,2194,-2296,790,27167,8990,-4976,2870,-1396,445,46,-205,184,-106,42,
-10,0,-10,31,-54,40,81,-388,912,-1580,2163,-2220,627,27101,9207,-5020,2868,-1379,428,59,-212,187,-107,42,-9,0,-10,31,-53,37,86,
-394,915,-1572,2131,-2145,465,27032,9425,-5062,2864,-1362,410,71,-220,190,-108,42,-9,0,-10,30,-51,33,92,-401,919,-1564,2099,-2069,305,26960,9643,-5103,2860,-1343,392,84,-227,193,-108,42,-9,0,-10,30,-50,30,97,-407,921,-1555,2066,-1993,147,26884,9861,-5143,2854,-1325,373,97,-234,195,-109,42,-9,0,-9,29,-48,27,103,-413,924,-1546,2032,-1917,-9,26806,10080,-5181,2847,-1305,355,110,-241,198,-110,42,-9,0,
-9,29,-47,24,108,-419,926,-1536,1999,-1841,-163,26725,10299,-5218,2840,-1286,336,123,-247,201,-110,41,-9,0,-9,28,-45,20,113,-425,928,-1526,1964,-1765,-315,26642,10518,-5253,2831,-1265,317,136,-254,203,-111,41,-9,0,-9,28,-44,17,118,-430,930,-1515,1930,-1689,-466,26555,10738,-5287,2821,-1244,297,149,-261,206,-111,41,-8,0,-9,27,-42,14,123,-436,931,-1504,1894,-1613,-614,26465,10958,-5320,2811,-1223,278,163,-268,209,-112,41,-8,0,-9,27,-41,11,128,-441,932,-1493,1859,-1537,-760,26373,11178,-5351,2799,-1200,258,176,-275,211,-112,41,
-8,0,-9,26,-39,8,133,-446,932,-1481,1823,-1461,-905,26278,11399,-5380,2786,-1178,238,189,-282,213,-112,40,-8,0,-9,26,-38,4,138,-451,932,-1469,
1787,-1385,-1047,26179,11619,-5408,2773,-1154,218,202,-288,216,-113,40,-8,0,-9,25,-36,1,143,-455,932,-1456,1750,-1309,-1187,26079,11839,-5434,2758,-1131,197,216,-295,218,-113,40,-7,0,-8,25,-35,-1,147,-460,932,-1443,1713,-1233,-1326,25975,12060,-5458,2742,-1106,176,229,-301,220,-113,40,-7,0,-8,24,-33,-4,152,-464,931,-1429,1675,-1158,-1462,25869,12280,-5481,2725,-1082,156,242,-308,223,
-113,39,-7,0,-8,24,-32,-7,156,-468,930,-1415,1638,-1083,-1596,25760,12501,-5503,2707,-1056,135,255,-315,225,-114,39,-7,0,-8,23,-30,-10,161,-472,929,-1401,1600,-1008,-1728,25648,12721,-5522,2688,-1030,113,269,-321,227,-114,39,-7,0,-8,23,-29,-13,165,-475,927,-1386,1561,-933,-1858,25533,12941,-5540,2668,-1004,92,282,-327,229,-114,38,-6,0,-8,22,-28,-16,169,-479,925,-1371,1523,-858,-1985,25416,13162,-5556,2647,-977,70,295,-334,231,-114,38,-6,0,-8,22,-26,-19,173,-482,923,-1356,1484,-784,-2111,25296,13381,-5571,2625,-950,49,309,-340,
233,-114,38,-6,0,-8,21,-25,-21,177,-485,920,-1340,1445,-710,-2234,25174,13601,-5584,2602,-922,27,322,-346,235,-114,37,-6,0,-7,20,-23,-24,181,
-488,918,-1324,1406,-636,-2356,25049,13820,-5595,2578,-893,5,335,-352,236,-114,37,-5,0,-7,20,-22,-27,185,-491,914,-1307,1366,-563,-2475,24922,14039,-5604,2553,-864,-16,349,-358,238,-114,36,-5,0,-7,19,-20,-30,189,-493,911,-1290,1326,-490,-2592,24792,14258,-5611,2526,-835,-39,362,-364,240,-114,36,-5,0,-7,19,-19,-32,192,-495,907,-1273,1286,-418,-2706,24659,14476,-5616,2499,-805,-61,375,-370,241,-113,35,-4,0,-7,18,-17,-35,196,-497,903,-1256,1246,-345,-2819,24524,14694,-5620,2471,-775,-84,388,-376,243,-113,35,-4,0,-7,18,-16,-38,199,
-499,899,-1238,1206,-274,-2929,24387,14911,-5622,2441,-744,-107,401,-381,244,-113,34,-4,-1,-7,17,-15,-40,202,-501,894,-1220,1166,-202,-3037,24247,15127,-5622,2411,-713,-129,414,-387,246,-113,34,-4,-1,-7,17,-13,-43,206,-503,889,-1201,1125,-132,-3143,24105,15343,-5620,2379,-681,-152,427,-392,247,-112,33,-3,-1,-6,16,-12,-45,209,-504,884,-1182,1084,-61,-3247,23960,15559,-5616,2347,-649,-175,440,-398,248,-112,33,-3,-1,-6,16,-11,-48,212,-505,879,-1163,1044,8,-3348,23813,15774,-5610,2313,-616,-198,453,-403,249,-111,32,-3,-1,-6,15,-9,
-50,215,-506,873,-1144,1003,77,-3448,23664,15988,-5602,2279,-583,-222,466,-408,250,-111,31,-2,-1,-6,15,-8,-53,217,-507,867,-1124,962,146,-3544,
23513,16201,-5592,2243,-550,-245,479,-413,251,-110,31,-2,-1,-6,14,-7,-55,220,-508,861,-1105,921,214,-3639,23359,16413,-5580,2206,-516,-268,491,-418,252,-110,30,-2,-1,-6,14,-5,-57,223,-508,855,-1085,880,282,-3732,23203,16625,-5567,2169,-482,-292,504,-423,253,-109,29,-1,-1,-6,13,-4,-60,225,-508,848,-1064,839,349,-3822,23045,16836,-5551,2130,-448,-315,516,-428,253,-108,29,-1,-1,-5,13,-3,-62,228,-509,841,-1044,798,415,-3910,22885,17046,-5533,2091,-413,-338,529,-433,254,-108,28,0,-2,-5,12,-1,-64,230,-509,834,-1023,756,481,
-3996,22723,17255,-5513,2050,-377,-362,541,-437,255,-107,27,0,-2,-5,12,0,-66,232,-508,827,-1002,715,546,-4079,22558,17463,-5491,2008,-342,-386,553,-442,255,-106,26,0,-2,-5,11,0,-68,234,-508,819,-981,674,611,-4160,22392,17670,-5467,1966,-306,-409,565,-446,255,-105,26,0,-2,-5,11,1,-70,236,-507,811,-959,633,674,-4239,22223,17875,-5441,1922,-269,-433,577,-450,256,-104,25,0,-2,-5,10,3,-72,238,-507,803,-938,592,738,-4316,22053,18080,-5412,1878,-233,-456,589,-454,256,-103,24,0,-2,-5,10,4,-74,240,-506,795,-916,551,800,-4390,21880,18284,
-5382,1832,-196,-480,601,-458,256,-102,23,1,-2,-4,9,5,-76,242,-505,786,-894,511,862,-4463,21706,18486,-5349,1786,-158,-503,613,-462,256,-101,22,1,-2,-4,9,6,-78,243,-503,777,
-872,470,923,-4533,21530,18687,-5315,1739,-121,-527,624,-466,256,-100,21,2,-2,-4,8,7,-80,245,-502,768,-850,429,983,-4600,21352,18887,-5278,1690,-83,-550,635,-469,256,-99,21,2,-3,-4,8,8,-82,246,-500,759,-827,389,1042,-4666,21172,19086,-5239,1641,-45,-574,647,-473,255,-98,20,3,-3,-4,7,9,-83,248,-498,750,-805,348,1101,-4729,20990,19283,-5198,1591,-6,-597,658,-476,255,-97,19,3,-3,-4,7,11,-85,249,-497,740,-782,308,1159,-4790,20807,19479,-5155,1540,31,-621,669,-479,255,-95,18,3,-3,-4,6,12,-87,250,-494,731,-760,
268,1216,-4849,20622,19673,-5109,1488,70,-644,679,-482,254,-94,17,4,-3,-4,6,13,-88,251,-492,721,-737,228,1272,-4905,20435,19866,-5061,1435,109,-667,690,-485,253,-93,16,4,-3,-3,5,14,-90,252,-490,711,-714,188,1327,-4959,20247,20057,-5012,1382,149,-691,700,-487,253,-91,15,5,-3,-3,5,15,-91,253,-487,700,-691,149,1382,-5012,20057,20247,-4959,1327,188,-714,711,-490,252,-90,14,5,-3,-3,4,16,-93,253,-485,690,-667,109,1435,-5061,19866,20435,-4905,1272,228,-737,721,-492,251,-88,13,6,-4,-3,4,17,-94,254,-482,679,-644,70,1488,-5109,19673,20622,
-4849,1216,268,-760,731,-494,250,-87,12,6,-4,-3,3,18,-95,255,-479,669,-621,31,1540,-5155,19479,20807,-4790,1159,308,-782,740,-497,249,-85,11,7,-4,-3,3,19,-97,255,-476,658,-597,-6,1591,
-5198,19283,20990,-4729,1101,348,-805,750,-498,248,-83,9,7,-4,-3,3,20,-98,255,-473,647,-574,-45,1641,-5239,19086,21172,-4666,1042,389,-827,759,-500,246,-82,8,8,-4,-3,2,21,-99,256,-469,635,-550,-83,1690,-5278,18887,21352,-4600,983,429,-850,768,-502,245,-80,7,8,-4,-2,2,21,-100,256,-466,624,-527,-121,1739,-5315,18687,21530,-4533,923,470,-872,777,-503,243,-78,6,9,-4,-2,1,22,-101,256,-462,613,-503,-158,1786,-5349,18486,21706,-4463,862,511,-894,786,-505,242,-76,5,9,-4,-2,1,23,
-102,256,-458,601,-480,-196,1832,-5382,18284,21880,-4390,800,551,-916,795,-506,240,-74,4,10,-5,-2,0,24,-103,256,-454,589,-456,-233,1878,-5412,18080,22053,-4316,738,592,-938,803,-507,238,-72,3,10,-5,-2,0,25,-104,256,-450,577,-433,-269,1922,-5441,17875,22223,-4239,674,633,-959,811,-507,236,-70,1,11,-5,-2,0,26,-105,255,-446,565,-409,-306,1966,-5467,17670,22392,-4160,611,674,-981,819,-508,234,-68,0,11,-5,-2,0,26,-106,255,-442,553,-386,-342,2008,-5491,17463,22558,-4079,546,715,-1002,827,-508,232,-66,0,12,-5,-2,0,27,
-107,255,-437,541,-362,-377,2050,-5513,17255,22723,-3996,481,756,-1023,834,-509,230,-64,-1,12,-5,-2,0,28,-108,254,-433,529,-338,-413,2091,-5533,17046,
22885,-3910,415,798,-1044,841,-509,228,-62,-3,13,-5,-1,-1,29,-108,253,-428,516,-315,-448,2130,-5551,16836,23045,-3822,349,839,-1064,848,-508,225,-60,-4,13,-6,-1,-1,29,-109,253,-423,504,-292,-482,2169,-5567,16625,23203,-3732,282,880,-1085,855,-508,223,-57,-5,14,-6,-1,-2,30,-110,252,-418,491,-268,-516,2206,-5580,16413,23359,-3639,214,921,-1105,861,-508,220,-55,-7,14,-6,-1,-2,31,-110,251,-413,479,-245,-550,2243,-5592,16201,23513,-3544,146,962,-1124,867,-507,217,-53,-8,15,-6,-1,-2,31,-111,250,-408,466,-222,-583,2279,-5602,15988,23664,
-3448,77,1003,-1144,873,-506,215,-50,-9,15,-6,-1,-3,32,-111,249,-403,453,-198,-616,2313,-5610,15774,23813,-3348,8,1044,-1163,879,-505,212,-48,-11,16,-6,-1,-3,33,-112,248,
-398,440,-175,-649,2347,-5616,15559,23960,-3247,-61,1084,-1182,884,-504,209,-45,-12,16,-6,-1,-3,33,-112,247,-392,427,-152,-681,2379,-5620,15343,24105,-3143,-132,1125,-1201,889,-503,206,-43,-13,17,-7,-1,-4,34,-113,246,-387,414,-129,-713,2411,-5622,15127,24247,-3037,-202,1166,-1220,894,-501,202,-40,-15,17,-7,-1,-4,34,-113,244,-381,401,-107,-744,2441,-5622,14911,24387,-2929,-274,1206,-1238,899,-499,199,-38,-16,18,-7,0,-4,35,-113,243,-376,388,-84,-775,2471,-5620,14694,24524,-2819,-345,1246,-1256,903,-497,196,-35,-17,18,-7,0,
-4,35,-113,241,-370,375,-61,-805,2499,-5616,14476,24659,-2706,-418,1286,-1273,907,-495,192,-32,-19,19,-7,0,-5,36,-114,240,-364,362,-39,-835,2526,-5611,
14258,24792,-2592,-490,1326,-1290,911,-493,189,-30,-20,19,-7,0,-5,36,-114,238,-358,349,-16,-864,2553,-5604,14039,24922,-2475,-563,1366,-1307,914,-491,185,-27,-22,20,-7,0,-5,37,-114,236,-352,335,5,-893,2578,-5595,13820,25049,-2356,-636,1406,-1324,918,-488,181,-24,-23,20,-7,0,-6,37,-114,235,-346,322,27,-922,2602,-5584,13601,25174,-2234,-710,1445,-1340,920,-485,177,-21,-25,21,-8,0,-6,38,-114,233,-340,309,49,-950,2625,-5571,13381,25296,-2111,-784,1484,-1356,923,-482,173,-19,-26,22,-8,0,-6,38,-114,231,-334,295,70,-977,2647,-5556,13162,
25416,-1985,-858,1523,-1371,925,-479,169,-16,-28,22,-8,0,-6,38,-114,229,-327,282,92,-1004,2668,-5540,12941,25533,-1858,-933,1561,-1386,927,-475,165,-13,-29,23,-8,0,-7,39,-114,227,-321,269,113,-1030,2688,-5522,12721,25648,-1728,-1008,1600,-1401,929,-472,161,-10,-30,23,-8,0,-7,39,-114,225,-315,255,135,-1056,2707,-5503,12501,25760,-1596,-1083,1638,-1415,930,-468,156,-7,-32,24,-8,0,-7,39,-113,223,-308,242,156,-1082,2725,-5481,12280,25869,-1462,-1158,1675,-1429,931,-464,152,-4,-33,24,-8,0,
-7,40,-113,220,-301,229,176,-1106,2742,-5458,12060,25975,-1326,-1233,1713,-1443,932,-460,147,-1,-35,25,-8,0,-7,40,-113,218,-295,216,197,-1131,2758,-5434,11839,26079,-1187,
-1309,1750,-1456,932,-455,143,1,-36,25,-9,0,-8,40,-113,216,-288,202,218,-1154,2773,-5408,11619,26179,-1047,-1385,1787,-1469,932,-451,138,4,-38,26,-9,0,-8,40,-112,213,-282,189,238,-1178,2786,-5380,11399,26278,-905,-1461,1823,-1481,932,-446,133,8,-39,26,-9,0,-8,41,-112,211,-275,176,258,-1200,2799,-5351,11178,26373,-760,-1537,1859,-1493,932,-441,128,11,-41,27,-9,0,-8,41,-112,209,-268,163,278,-1223,2811,-5320,10958,26465,-614,-1613,1894,-1504,931,-436,123,14,-42,27,-9,0,-8,41,-111,206,-261,
149,297,-1244,2821,-5287,10738,26555,-466,-1689,1930,-1515,930,-430,118,17,-44,28,-9,0,-9,41,-111,203,-254,136,317,-1265,2831,-5253,10518,26642,-315,-1765,1964,-1526,928,-425,113,20,-45,28,
-9,0,-9,41,-110,201,-247,123,336,-1286,2840,-5218,10299,26725,-163,-1841,1999,-1536,926,-419,108,24,-47,29,-9,0,-9,42,-110,198,-241,110,355,-1305,2847,-5181,10080,
26806,-9,-1917,2032,-1546,924,-413,103,27,-48,29,-9,0,-9,42,-109,195,-234,97,373,-1325,2854,-5143,9861,26884,147,-1993,2066,-1555,921,-407,97,30,-50,30,-10,0,-9,42,-108,193,-227,84,392,-1343,2860,-5103,9643,26960,305,-2069,2099,-1564,919,-401,92,33,-51,30,-10,0,-9,42,-108,190,-220,71,410,-1362,2864,
-5062,9425,27032,465,-2145,2131,-1572,915,-394,86,37,-53,31,-10,0,-9,42,-107,187,-212,59,428,-1379,2868,-5020,9207,27101,627,-2220,2163,-1580,912,-388,81,40,-54,31,-10,0,-10,42,-106,184,-205,46,445,-1396,2870,-4976,8990,27167,790,-2296,2194,-1587,908,-381,75,43,-56,32,-10,0,-10,42,-106,181,-198,33,463,-1413,2872,-4931,8773,27230,956,-2371,2225,-1594,904,-374,69,47,-57,32,-10,0,-10,42,-105,178,-191,21,480,-1428,2872,-4885,8558,27291,1123,-2446,2255,-1600,899,-367,64,50,-59,32,-10,0,-10,42,
-104,175,-184,8,497,-1444,2872,-4838,8342,27348,1292,-2521,2285,-1606,894,-359,58,54,-60,33,-10,0,-10,42,-103,172,-177,-3,513,-1458,2871,-4789,8128,27402,1463,-2596,2314,-1611,889,-352,52,57,-62,33,-10,0,-10,42,-102,169,-170,-15,529,
-1472,2868,-4739,7914,27453,1636,-2670,2343,-1616,884,-344,46,61,-63,34,-10,0,-10,42,-101,166,-163,-28,545,-1486,2865,-4688,7700,
27501,1810,-2744,2371,-1620,878,-336,40,64,-65,34,-10,0,-10,42,-100,163,-156,-40,561,-1499,2861,-4636,7488,27546,1986,-2818,2398,-1624,871,-328,33,67,-66,35,-10,0,-10,42,-99,159,-149,-52,576,-1511,2856,-4582,7276,27588,2164,-2891,2425,-1627,865,-320,27,71,-67,35,-10,1,-10,42,-98,156,-142,-64,591,-1523,2850,-4528,7065,27627,2343,-2964,2451,-1629,858,
-311,21,74,-69,35,-11,1,-11,41,-97,153,-134,-76,606,-1534,2843,-4473,6855,27663,2524,-3037,2476,-1631,851,-303,15,78,-70,36,-11,1,-11,41,-96,150,-127,-87,621,-1545,2835,-4416,6646,27696,2707,-3109,2501,-1633,843,-294,8,81,-72,36,-11,1,-11,41,-95,146,-120,-99,635,-1555,2826,-4359,6438,27726,2891,-3181,2525,-1634,835,-285,2,85,-73,36,-11,1,
-11,41,-94,143,-113,-110,649,-1564,2817,-4300,6231,27752,3076,-3252,2548,-1634,827,-276,-4,88,-74,37,-11,1,-11,41,-93,140,-106,-122,662,-1573,2806,-4241,6025,27776,3263,-3322,2571,-1634,818,-267,-10,92,-76,37,-11,1,-11,41,-92,136,-99,-133,676,-1581,2795,-4180,5820,27796,3452,-3392,2593,-1634,809,-257,-17,95,-77,38,-11,1,-11,41,-91,
133,-92,-144,689,-1588,2782,-4119,5616,27813,3642,-3462,2614,-1632,800,-248,-23,
99,-78,38,-11,1,-11,40,-90,130,-85,-155,701,-1595,2769,-4057,5413,27827,3834,-3531,2634,-1631,790,-238,-30,102,-80,38,-11,1,-11,40,-89,126,-78,-166,713,-1602,2755,-3994,5211,27838,4026,-3599,2654,-1628,780,-228,-37,106,-81,38,-11,1,-11,40,-87,123,-71,-177,725,-1608,2740,-3930,5011,27846,4221,-3667,
2673,-1625,770,-218,-44,109,-82,39,-11,1,-11,40,-86,119,-64,-187,737,-1613,2725,-3865,4811,27851,4416,-3733,2691,-1622,759,-208,-50,113,-84,39,-11, };

#endif

__UNUSED _attribute_bss_dlm_ static short my_src_48to16_sinc[SRC_48to16_DEN * SRC_48to16_FILTER_LEN];
__UNUSED _attribute_bss_dlm_ static short my_src_16to48_sinc[SRC_16to48_DEN * SRC_16to48_FILTER_LEN];

_attribute_data_dlm_ static float kaiser12_table[68] = {
   0.99859849, 1.00000000, 0.99859849, 0.99440475, 0.98745105, 0.97779076,
   0.96549770, 0.95066529, 0.93340547, 0.91384741, 0.89213598, 0.86843014,
   0.84290116, 0.81573067, 0.78710866, 0.75723148, 0.72629970, 0.69451601,
   0.66208321, 0.62920216, 0.59606986, 0.56287762, 0.52980938, 0.49704014,
   0.46473455, 0.43304576, 0.40211431, 0.37206735, 0.34301800, 0.31506490,
   0.28829195, 0.26276832, 0.23854851, 0.21567274, 0.19416736, 0.17404546,
   0.15530766, 0.13794294, 0.12192957, 0.10723616, 0.09382272, 0.08164178,
   0.07063950, 0.06075685, 0.05193064, 0.04409466, 0.03718069, 0.03111947,
   0.02584161, 0.02127838, 0.01736250, 0.01402878, 0.01121463, 0.00886058,
   0.00691064, 0.00531256, 0.00401805, 0.00298291, 0.00216702, 0.00153438,
   0.00105297, 0.00069463, 0.00043489, 0.00025272, 0.00013031, 0.0000527734,
   0.00001000, 0.00000000 };

_attribute_data_dlm_ static float kaiser10_table[36] = {
   0.99537781, 1.00000000, 0.99537781, 0.98162644, 0.95908712, 0.92831446,
   0.89005583, 0.84522401, 0.79486424, 0.74011713, 0.68217934, 0.62226347,
   0.56155915, 0.50119680, 0.44221549, 0.38553619, 0.33194107, 0.28205962,
   0.23636152, 0.19515633, 0.15859932, 0.12670280, 0.09935205, 0.07632451,
   0.05731132, 0.04193980, 0.02979584, 0.02044510, 0.01345224, 0.00839739,
   0.00488951, 0.00257636, 0.00115101, 0.00035515, 0.00000000, 0.00000000 };

_attribute_data_dlm_ static float kaiser8_table[36] = {
   0.99635258, 1.00000000, 0.99635258, 0.98548012, 0.96759014, 0.94302200,
   0.91223751, 0.87580811, 0.83439927, 0.78875245, 0.73966538, 0.68797126,
   0.63451750, 0.58014482, 0.52566725, 0.47185369, 0.41941150, 0.36897272,
   0.32108304, 0.27619388, 0.23465776, 0.19672670, 0.16255380, 0.13219758,
   0.10562887, 0.08273982, 0.06335451, 0.04724088, 0.03412321, 0.02369490,
   0.01563093, 0.00959968, 0.00527363, 0.00233883, 0.00050000, 0.00000000 };

_attribute_data_dlm_ static float kaiser6_table[36] = {
   0.99733006, 1.00000000, 0.99733006, 0.98935595, 0.97618418, 0.95799003,
   0.93501423, 0.90755855, 0.87598009, 0.84068475, 0.80211977, 0.76076565,
   0.71712752, 0.67172623, 0.62508937, 0.57774224, 0.53019925, 0.48295561,
   0.43647969, 0.39120616, 0.34752997, 0.30580127, 0.26632152, 0.22934058,
   0.19505503, 0.16360756, 0.13508755, 0.10953262, 0.08693120, 0.06722600,
   0.05031820, 0.03607231, 0.02432151, 0.01487334, 0.00752000, 0.00000000 };

__UNUSED _attribute_data_dlm_ static struct FuncDef _KAISER12 = { kaiser12_table, 64 };
#define KAISER12 (&_KAISER12)
__UNUSED _attribute_data_dlm_ static struct FuncDef _KAISER10 = { kaiser10_table, 32 };
#define KAISER10 (&_KAISER10)
__UNUSED _attribute_data_dlm_ static struct FuncDef _KAISER8 = { kaiser8_table, 32 };
#define KAISER8 (&_KAISER8)
__UNUSED _attribute_data_dlm_ static struct FuncDef _KAISER6 = { kaiser6_table, 32 };
#define KAISER6 (&_KAISER6)

//static const struct QualityMapping quality_map[11] = {
//   {  8,  4, 0.830f, 0.860f, KAISER6 }, /* Q0 */
//   { 16,  4, 0.850f, 0.880f, KAISER6 }, /* Q1 */
//   { 32,  4, 0.882f, 0.910f, KAISER6 }, /* Q2 */  /* 82.3% cutoff ( ~60 dB stop) 6  */
//   { 48,  8, 0.895f, 0.917f, KAISER8 }, /* Q3 */  /* 84.9% cutoff ( ~80 dB stop) 8  */
//   { 64,  8, 0.921f, 0.940f, KAISER8 }, /* Q4 */  /* 88.7% cutoff ( ~80 dB stop) 8  */
//   { 80, 16, 0.922f, 0.940f, KAISER10}, /* Q5 */  /* 89.1% cutoff (~100 dB stop) 10 */
//   { 96, 16, 0.940f, 0.945f, KAISER10}, /* Q6 */  /* 91.5% cutoff (~100 dB stop) 10 */
//   {128, 16, 0.950f, 0.950f, KAISER10}, /* Q7 */  /* 93.1% cutoff (~100 dB stop) 10 */
//   {160, 16, 0.960f, 0.960f, KAISER10}, /* Q8 */  /* 94.5% cutoff (~100 dB stop) 10 */
//   {192, 32, 0.968f, 0.968f, KAISER12}, /* Q9 */  /* 95.5% cutoff (~100 dB stop) 10 */
//   {256, 32, 0.975f, 0.975f, KAISER12}, /* Q10 */ /* 96.6% cutoff (~100 dB stop) 10 */
//};

/* ops */
#ifdef FIXED_POINT
#define WORD2INT(x) ((x) < -32767 ? -32768 : ((x) > 32766 ? 32767 : (x)))  
#else
#define WORD2INT(x) ((x) < -32767.5f ? -32768 : ((x) > 32766.5f ? 32767 : floor(.5+(x))))  
#endif
#define IMAX(a,b) ((a) > (b) ? (a) : (b))
#define IMIN(a,b) ((a) < (b) ? (a) : (b))

#define QCONST16(x,bits) ((short)(.5f+(x)*(((int)1)<<(bits))))

#define EXTRACT16(x) ((short)(x))
#define EXTEND32(x) ((int)(x))
#define SHR16(a,shift) ((a) >> (shift))
#define SHL16(a,shift) ((a) << (shift))
#define SHR32(a,shift) ((a) >> (shift))
#define SHL32(a,shift) ((a) << (shift))
#define PSHR16(a,shift) (SHR16((a)+((1<<((shift))>>1)),shift))
#if __riscv
#define PSHR32(a,shift) __nds__sra_u(a,shift)
#else
#define PSHR32(a,shift) (SHR32((a)+((EXTEND32(1)<<((shift))>>1)),shift))
#endif
#define VSHR32(a, shift) (((shift)>0) ? SHR32(a, shift) : SHL32(a, -(shift)))
#define SATURATE16(x,a) (((x)>(a) ? (a) : (x)<-(a) ? -(a) : (x)))
#define SATURATE32(x,a) (((x)>(a) ? (a) : (x)<-(a) ? -(a) : (x)))

#define SHR(a,shift) ((a) >> (shift))
#define SHL(a,shift) ((int)(a) << (shift))
#define PSHR(a,shift) (SHR((a)+((EXTEND32(1)<<((shift))>>1)),shift))
#define SATURATE(x,a) (((x)>(a) ? (a) : (x)<-(a) ? -(a) : (x)))

#define ADD16(a,b) ((short)((short)(a)+(short)(b)))
#define SUB16(a,b) ((short)(a)-(short)(b))
#define ADD32(a,b) ((int)(a)+(int)(b))
#define SUB32(a,b) ((int)(a)-(int)(b))

#define MULT16_16(a,b)     (((int)(short)(a))*((int)(short)(b)))
#define MULT16_16_P15(a,b) (SHR(ADD32(16384,MULT16_16((a),(b))),15))

#if __riscv
#define MULT16_32_Q15(a,b) __nds__kmmwb2(b,a)
#else
#define MULT16_32_Q15(a,b) ADD32(MULT16_16((a),SHR((b),15)), SHR(MULT16_16((a),((b)&0x00007fff)),15))
#endif
#define DIV32_16(a,b) ((short)(((int)(a))/((short)(b))))
#define PDIV32_16(a,b) ((short)(((int)(a)+((short)(b)>>1))/((short)(b))))
#define DIV32(a,b) (((int)(a))/((int)(b)))
#define PDIV32(a,b) (((int)(a)+((short)(b)>>1))/((int)(b)))

/* static func */
//MY_RESAMPLE_RAMCODE
static float src_compute_func(float x)
{
    float y, frac;
#if __riscv
    float interp[4];
#else
    double interp[4];
#endif
    int ind;
    y = x * 32;//FuncDef.oversample
#if __riscv
    ind = (int)y;
#else
    ind = (int)floor(y);
#endif
    frac = (y - ind);
    /* CSE with handle the repeated powers */
    interp[3] = -0.1666666667f * frac + 0.1666666667f * (frac * frac * frac);
    interp[2] = frac + 0.5f * (frac * frac) - 0.5f * (frac * frac * frac);
    /*interp[2] = 1.f - 0.5f*frac - frac*frac + 0.5f*frac*frac*frac;*/
    interp[0] = -0.3333333333f * frac + 0.5f * (frac * frac) - 0.1666666667f * (frac * frac * frac);
    /* Just to make sure we don't have rounding problems */
    interp[1] = 1.f - interp[3] - interp[2] - interp[0];
    /*sum = frac*accum[1] + (1-frac)*accum[2];*/
    return interp[0] * SRC_KAISER_X[ind] + interp[1] * SRC_KAISER_X[ind + 1] + interp[2] * SRC_KAISER_X[ind + 2] + interp[3] * SRC_KAISER_X[ind + 3];
}

//MY_RESAMPLE_RAMCODE
static short src_sinc(float cutoff, float x, int N)
{
    /*fprintf (stderr, "%f ", x);*/
    float xx = x * cutoff;
    if (fabsf(x) < 1e-6f)
    {
        /* printf("%f,", 1.0);*/
        return WORD2INT(32768.f * cutoff);
    }
    else if (fabsf(x) > .5f * N)
    {
        /* printf("%f,", 0.0);*/
        return 0;
    }
    /*FIXME: Can it really be any slower than this? */
    /*printf("%f,", cutoff * sin(M_PI * xx) / (M_PI * xx));*/
#if __riscv
    return WORD2INT(32768.f * cutoff * nds_sin_f32((float)M_PI * xx) / ((float)M_PI * xx) * src_compute_func(fabsf(2.f * x / (float)N)));
#else
    return WORD2INT(32768.f * cutoff * sin(M_PI * xx) / (M_PI * xx) * src_compute_func(fabsf(2.f * x / N)));
#endif
}

//MY_RESAMPLE_RAMCODE
__UNUSED static void cubic_coef(short x, short interp[4])
{
    /* Compute interpolation coefficients. I'm not sure whether this corresponds to cubic interpolation
    but I know it's MMSE-optimal on a sinc */
    //int cyc1 = __nds__csrr(NDS_MCYCLE);
#if __riscv
    short x2, x3;
    x2 = __nds__khmbb(x, x);
    x3 = __nds__khmbb(x, x2);
    //spx_word32_t x3_6 = MULT16_16(QCONST16(0.16667f, 15), x3);

    interp[0] = __nds__khmbb(QCONST16(0.16667f, 15), (x3 - x));
    interp[1] = x + __nds__rsub16(x2, x3);
    interp[3] = PSHR32(MULT16_16(QCONST16(-0.33333f, 15), x) + MULT16_16(QCONST16(.5f, 15), x2) + MULT16_16(QCONST16(-0.16667f, 15), x3), 15);
    /* Just to make sure we don't have rounding problems */
    interp[2] = 32767 - interp[0] - interp[1] - interp[3];
    //if (interp[2] < 32767)
    //   interp[2] += 1;
#else
    short x2, x3;
    x2 = MULT16_16_P15(x, x);
    x3 = MULT16_16_P15(x, x2);
    interp[0] = PSHR32(MULT16_16(QCONST16(-0.16667f, 15), x) + MULT16_16(QCONST16(0.16667f, 15), x3), 15);
    interp[1] = EXTRACT16(EXTEND32(x) + SHR32(SUB32(EXTEND32(x2), EXTEND32(x3)), 1));
    interp[3] = PSHR32(MULT16_16(QCONST16(-0.33333f, 15), x) + MULT16_16(QCONST16(.5f, 15), x2) - MULT16_16(QCONST16(0.16667f, 15), x3), 15);
    /* Just to make sure we don't have rounding problems */
    interp[2] = 32767 - interp[0] - interp[1] - interp[3];
    if (interp[2] < 32767)
        interp[2] += 1;
#endif
}

#if 1
//MY_RESAMPLE_RAMCODE
static inline void cubic_coef_f(float frac, float interp[4])
{
    float fx2 = frac * frac;
    float fx3 = fx2 * frac;
    float fx3p1 = 0.1667f * fx3;
    float fx3p5 = 0.5f * fx3;
    float fx2p5 = 0.5f * fx2;
    interp[0] = 0.16667f * (fx3 - frac);
    interp[1] = frac + fx2p5 - fx3p5;
    interp[3] = fx2p5 - 0.33333f * frac - fx3p1;
    interp[2] = 1.0f - interp[0] - interp[1] - interp[3];
}
#else
static void cubic_coef_f(short frac, short interp[4])
{
    /* Compute interpolation coefficients. I'm not sure whether this corresponds to cubic interpolation
    but I know it's MMSE-optimal on a sinc */
    interp[0] = -0.16667f * frac + 0.16667f * frac * frac * frac;
    interp[1] = frac + 0.5f * frac * frac - 0.5f * frac * frac * frac;
    /*interp[2] = 1.f - 0.5f*frac - frac*frac + 0.5f*frac*frac*frac;*/
    interp[3] = -0.33333f * frac + 0.5f * frac * frac - 0.16667f * frac * frac * frac;
    /* Just to make sure we don't have rounding problems */
    interp[2] = 1. - interp[0] - interp[1] - interp[3];
}
#endif

#define PPM_FLOAT_API 1

#if 0 // TODO
#if __riscv
//__attribute__((section(".ram_code")))
MY_RESAMPLE_RAMCODE
#endif
void my_src_common_process_interp(MyResampleStruct_t* st, const short* in, unsigned int ilen, short* out, unsigned int* out_len, int stereo)
{
	if(ilen > SRC_DATA_LEN_MAX){
		*out_len = 0;
		return ; TODO: if not return, st->src_buf_left will be overflow;
	}
	
    int j;

    const int filt_offs = st->filter_len - 1;
    const int filt_len = st->filter_len;
    const int oversample = st->oversample;
    /* audio data of current frame start from 'filt_offs'. data between 0 to 'filt_offs' is belong to last frame. */
    if (stereo)
    {
        for (j = 0; j < ilen; ++j)
        {
            st->src_buf_left[j + filt_offs] = in[2 * j];
            st->src_buf_right[j + filt_offs] = in[2 * j + 1];
        }
    }
    else
    {
        for (j = 0; j < ilen; ++j)
        {
            st->src_buf_left[j + filt_offs] = in[j];
        }
    }

    int out_sample = 0;
    int last_sample = st->last_sample;
    unsigned int samp_frac_num = st->samp_frac_num;
    const int int_advance = st->int_advance;
    const int frac_advance = st->frac_advance;
    const unsigned int den_rate = st->den_rate;
    float sum_left;
    float sum_right;

    while (last_sample < (int)ilen)
    {

        const int offset = samp_frac_num * oversample / st->den_rate;
        const float frac = (float)(((samp_frac_num * oversample) % st->den_rate)) / st->den_rate;
        float interp[4];

#if __riscv
        int accum_left[4] = { 0,0,0,0 };
        int accum_right[4] = { 0,0,0,0 };
        if (stereo)
        {
            const int* iptr_left = (int*)&st->src_buf_left[last_sample];
            const int* iptr_right = (int*)&st->src_buf_right[last_sample];
            const int* sinc_ptr = (int*)&st->sinc_table[offset * 4 * filt_len];
            for (j = 0; j < filt_len >> 1; j++)
            {
                const int curr_in_left = iptr_left[j];
                const int curr_in_right = iptr_right[j];
                accum_left[0] = __nds__kmada(accum_left[0], curr_in_left, *(sinc_ptr + j));
                accum_right[0] = __nds__kmada(accum_right[0], curr_in_right, *(sinc_ptr + j));

                accum_left[1] = __nds__kmada(accum_left[1], curr_in_left, *(sinc_ptr + j + (filt_len >> 1)));
                accum_right[1] = __nds__kmada(accum_right[1], curr_in_right, *(sinc_ptr + j + (filt_len >> 1)));

                accum_left[2] = __nds__kmada(accum_left[2], curr_in_left, *(sinc_ptr + j + (filt_len)));
                accum_right[2] = __nds__kmada(accum_right[2], curr_in_right, *(sinc_ptr + j + (filt_len)));

                accum_left[3] = __nds__kmada(accum_left[3], curr_in_left, *(sinc_ptr + j + (3 * filt_len >> 1)));
                accum_right[3] = __nds__kmada(accum_right[3], curr_in_right, *(sinc_ptr + j + (3 * filt_len >> 1)));
                //asm("nop");
            }
        }
        else
        {
            const int* iptr_left = (int*)&st->src_buf_left[last_sample];
            const int* sinc_ptr = (int*)&st->sinc_table[offset * 4 * filt_len];
            for (j = 0; j < filt_len >> 1; j++)
            {
                const int curr_in_left = iptr_left[j];
                accum_left[0] = __nds__kmada(accum_left[0], curr_in_left, *(sinc_ptr + j));
                accum_left[1] = __nds__kmada(accum_left[1], curr_in_left, *(sinc_ptr + j + (filt_len >> 1)));
                accum_left[2] = __nds__kmada(accum_left[2], curr_in_left, *(sinc_ptr + j + (filt_len)));
                accum_left[3] = __nds__kmada(accum_left[3], curr_in_left, *(sinc_ptr + j + (3 * filt_len >> 1)));

            }
        }
#else
        int accum_left[4] = { 0,0,0,0 };
        int accum_right[4] = { 0,0,0,0 };
        if (stereo)
        {

            const short* iptr_left = &st->src_buf_left[last_sample];
            const short* iptr_right = &st->src_buf_right[last_sample];

            for (j = 0; j < filt_len; j += 2)
            {
                const short curr_in_left = iptr_left[j];
                const short curr_in_right = iptr_right[j];
                accum_left[0] += MULT16_16(curr_in_left, st->sinc_table[offset * 4 * filt_len + 0 * filt_len + j]);
                accum_left[1] += MULT16_16(curr_in_left, st->sinc_table[offset * 4 * filt_len + 1 * filt_len + j]);
                accum_left[2] += MULT16_16(curr_in_left, st->sinc_table[offset * 4 * filt_len + 2 * filt_len + j]);
                accum_left[3] += MULT16_16(curr_in_left, st->sinc_table[offset * 4 * filt_len + 3 * filt_len + j]);

                accum_right[0] += MULT16_16(curr_in_right, st->sinc_table[offset * 4 * filt_len + 0 * filt_len + j]);
                accum_right[1] += MULT16_16(curr_in_right, st->sinc_table[offset * 4 * filt_len + 1 * filt_len + j]);
                accum_right[2] += MULT16_16(curr_in_right, st->sinc_table[offset * 4 * filt_len + 2 * filt_len + j]);
                accum_right[3] += MULT16_16(curr_in_right, st->sinc_table[offset * 4 * filt_len + 3 * filt_len + j]);


                const short curr_in_left2 = iptr_left[j + 1];
                const short curr_in_right2 = iptr_right[j + 1];
                accum_left[0] += MULT16_16(curr_in_left2, st->sinc_table[offset * 4 * filt_len + 0 * filt_len + j + 1]);
                accum_left[1] += MULT16_16(curr_in_left2, st->sinc_table[offset * 4 * filt_len + 1 * filt_len + j + 1]);
                accum_left[2] += MULT16_16(curr_in_left2, st->sinc_table[offset * 4 * filt_len + 2 * filt_len + j + 1]);
                accum_left[3] += MULT16_16(curr_in_left2, st->sinc_table[offset * 4 * filt_len + 3 * filt_len + j + 1]);

                accum_right[0] += MULT16_16(curr_in_right2, st->sinc_table[offset * 4 * filt_len + 0 * filt_len + j + 1]);
                accum_right[1] += MULT16_16(curr_in_right2, st->sinc_table[offset * 4 * filt_len + 1 * filt_len + j + 1]);
                accum_right[2] += MULT16_16(curr_in_right2, st->sinc_table[offset * 4 * filt_len + 2 * filt_len + j + 1]);
                accum_right[3] += MULT16_16(curr_in_right2, st->sinc_table[offset * 4 * filt_len + 3 * filt_len + j + 1]);
            }
        }
        else
        {
            const short* iptr_left = &st->src_buf_left[last_sample];
            for (j = 0; j < filt_len; j += 2)
            {
                const short curr_in_left = iptr_left[j];
                accum_left[0] += MULT16_16(curr_in_left, st->sinc_table[offset * 4 * filt_len + 0 * filt_len + j]);
                accum_left[1] += MULT16_16(curr_in_left, st->sinc_table[offset * 4 * filt_len + 1 * filt_len + j]);
                accum_left[2] += MULT16_16(curr_in_left, st->sinc_table[offset * 4 * filt_len + 2 * filt_len + j]);
                accum_left[3] += MULT16_16(curr_in_left, st->sinc_table[offset * 4 * filt_len + 3 * filt_len + j]);

                const short curr_in_left2 = iptr_left[j + 1];
                accum_left[0] += MULT16_16(curr_in_left2, st->sinc_table[offset * 4 * filt_len + 0 * filt_len + j + 1]);
                accum_left[1] += MULT16_16(curr_in_left2, st->sinc_table[offset * 4 * filt_len + 1 * filt_len + j + 1]);
                accum_left[2] += MULT16_16(curr_in_left2, st->sinc_table[offset * 4 * filt_len + 2 * filt_len + j + 1]);
                accum_left[3] += MULT16_16(curr_in_left2, st->sinc_table[offset * 4 * filt_len + 3 * filt_len + j + 1]);

            }
        }
#endif

        cubic_coef_f(frac, interp);
        if (stereo)
        {
            sum_left = (interp[0] * accum_left[0]) + (interp[1] * accum_left[1]) + (interp[2] * accum_left[2]) + (interp[3] * accum_left[3]);
            float out_tmp;

            out_tmp = sum_left / 32768.f;
            out_tmp += out_tmp > 0 ? 0.5f : -0.5f;
            if (out_tmp > 32767.f)
            {
                out[out_sample++] = 32767;
            }
            else if (out_tmp < -32768.f)
            {
                out[out_sample++] = -32768;
            }
            else
            {
                out[out_sample++] = (short)out_tmp;
            }

            sum_right = (interp[0] * accum_right[0]) + (interp[1] * accum_right[1]) + (interp[2] * accum_right[2]) + (interp[3] * accum_right[3]);
            out_tmp = sum_right / 32768.f;
            out_tmp += out_tmp > 0 ? 0.5f : -0.5f;
            if (out_tmp > 32767.f)
            {
                out[out_sample++] = 32767;
            }
            else if (out_tmp < -32768.f)
            {
                out[out_sample++] = -32768;
            }
            else
            {
                out[out_sample++] = (short)out_tmp;
            }
        }
        else
        {
            sum_left = (interp[0] * accum_left[0]) + (interp[1] * accum_left[1]) + (interp[2] * accum_left[2]) + (interp[3] * accum_left[3]);
            float out_tmp;
            out_tmp = sum_left / 32768.f;
            out_tmp += out_tmp > 0 ? 0.5f : -0.5f;
            if (out_tmp > 32767.f)
            {
                out[out_sample++] = 32767;
            }
            else if (out_tmp < -32768.f)
            {
                out[out_sample++] = -32768;
            }
            else
            {
                out[out_sample++] = (short)out_tmp;
            }
        }
        last_sample += int_advance; // data_buf has to be moved when update last_sample. int_advance is equal to 1 or 0 when correcting ppm.
        samp_frac_num += frac_advance;

        if (samp_frac_num >= den_rate)
        {
            samp_frac_num -= den_rate;
            last_sample++;
        }

    }

    st->samp_frac_num = samp_frac_num;
    *out_len = out_sample;

    for (j = 0; j < filt_offs; ++j)
    {
        st->src_buf_left[j] = st->src_buf_left[j + ilen];
        st->src_buf_right[j] = st->src_buf_right[j + ilen];
    }

    st->last_sample = last_sample - ilen;
}
#endif

#if __riscv
__attribute__((section(".ram_code")))
#endif
void my_src_common_process_direct_2(MyResampleStruct_t* st,
    const short* in,
    unsigned int ilen,
    short* out,
    unsigned int* out_len,
    int stereo)
{
    const int filt_offs = st->filter_len - 1;
    const int filt_len = st->filter_len;
    int out_sample = 0;
    int last_sample = st->last_sample;
    unsigned int samp_frac_num = st->samp_frac_num;
    const short* sinc_table = st->sinc_table;
    const int int_advance = st->int_advance;
    const int frac_advance = st->frac_advance;
    const unsigned int den_rate = st->den_rate;
#if __riscv
    long long int sum_left = 0;
    long long int sum_right = 0;
#else
    int sum_left;
    int sum_right;
#endif
    int j;

    /* audio data of current frame start from 'filt_offs'. data between 0 to 'filt_offs' is belong to last frame. */
    if (stereo)
    {
        for (j = 0; j < ilen; ++j)
        {
            st->src_buf_left[j + filt_offs] = in[2 * j];
            st->src_buf_right[j + filt_offs] = in[2 * j + 1];
        }
    }
    else
    {
        for (j = 0; j < ilen; ++j)
            st->src_buf_left[j + filt_offs] = in[j];
    }

    while (!(last_sample >= (int)ilen))
    {

#if __riscv
        const int* sinc = (int*)&sinc_table[samp_frac_num * filt_len];

        const int* iptr_left = (int*)&st->src_buf_left[last_sample];
        const int* iptr_right = (int*)&st->src_buf_right[last_sample];
        sum_left = 0;
        sum_right = 0;

        if (stereo)
        {
            for (int i = 0; i < filt_len >> 1; i += 2)
            {
                sum_left = __nds__smalda(sum_left, sinc[i], iptr_left[i]);
                sum_left = __nds__smalda(sum_left, sinc[i + 1], iptr_left[i + 1]);

                sum_right = __nds__smalda(sum_right, sinc[i], iptr_right[i]);
                sum_right = __nds__smalda(sum_right, sinc[i + 1], iptr_right[i + 1]);
            }
        }
        else
        {
            for (int i = 0; i < filt_len >> 1; i += 2)
            {
                sum_left = __nds__smalda(sum_left, sinc[i], iptr_left[i]);
                sum_left = __nds__smalda(sum_left, sinc[i + 1], iptr_left[i + 1]);
            }
        }

        sum_left = __nds__sra_u(sum_left, 15);
        out[out_sample++] = (((sum_left) > (32767) ? (32767) : (sum_left) < -(32768) ? -(32768) : (sum_left)));

        if (stereo)
        {
            sum_right = __nds__sra_u(sum_right, 15);
            out[out_sample++] = (((sum_right) > (32767) ? (32767) : (sum_right) < -(32768) ? -(32768) : (sum_right)));
        }
#else
        const short* sinc = &sinc_table[samp_frac_num * filt_len];

        const short* iptr_left = &st->src_buf_left[last_sample];
        const short* iptr_right = &st->src_buf_right[last_sample];
        float accum_left[4] = { 0,0,0,0 };
        float accum_right[4] = { 0,0,0,0 };

        for (j = 0; j < filt_len; j += 4) {
            accum_left[0] += sinc[j] * iptr_left[j];
            accum_left[1] += sinc[j + 1] * iptr_left[j + 1];
            accum_left[2] += sinc[j + 2] * iptr_left[j + 2];
            accum_left[3] += sinc[j + 3] * iptr_left[j + 3];

            accum_right[0] += sinc[j] * iptr_right[j];
            accum_right[1] += sinc[j + 1] * iptr_right[j + 1];
            accum_right[2] += sinc[j + 2] * iptr_right[j + 2];
            accum_right[3] += sinc[j + 3] * iptr_right[j + 3];
        }
        sum_left = accum_left[0] + accum_left[1] + accum_left[2] + accum_left[3];
        sum_right = accum_right[0] + accum_right[1] + accum_right[2] + accum_right[3];
        int sum_tmp;
        sum_tmp = PSHR32(sum_left, 15);
        out[out_sample++] = (((sum_tmp) > (32767) ? (32767) : (sum_tmp) < -(32768) ? -(32768) : (sum_tmp)));
        sum_tmp = PSHR32(sum_right, 15);
        out[out_sample++] = (((sum_tmp) > (32767) ? (32767) : (sum_tmp) < -(32768) ? -(32768) : (sum_tmp)));
#endif

        last_sample += int_advance;
        samp_frac_num += frac_advance;

        if (samp_frac_num >= den_rate)
        {
            samp_frac_num -= den_rate;
            last_sample++;
        }
    }

    st->last_sample = last_sample - ilen;
    st->samp_frac_num = samp_frac_num;

    *out_len = out_sample;

    for (j = 0; j < filt_len - 1; ++j)
    {
        st->src_buf_left[j] = st->src_buf_left[j + ilen];

        if (stereo)
            st->src_buf_right[j] = st->src_buf_right[j + ilen];
    }
}

#if __riscv
__attribute__((section(".ram_code")))
#endif
void my_src_common_process_direct(MyResampleStruct_t* st,
    const short* in,
    unsigned int ilen,
    short* out,
    unsigned int* out_len,
    int stereo)
{
	*out_len = 0;

	do{
		int nw = min(SRC_DATA_LEN_MAX, ilen);
		unsigned int out_len_page = 0;
		my_src_common_process_direct_2(st, in, nw, out, &out_len_page, stereo);
		in += nw;
		ilen -= nw;
		out += out_len_page;
		*out_len += out_len_page;
	}while(ilen > 0);
}

#if __riscv
__attribute__((noinline))
#endif
void my_src_common_init_fix_table(MyResampleStruct_t* st, int num, int den, float cutoff, int filter_len, short* sinc_table)
{
    st->initialised = 1;
    st->last_sample = 0;
    st->samp_frac_num = 0;
    st->cutoff = cutoff;
    st->int_advance = num / den;
    st->frac_advance = num % den;
    st->den_rate = den;
    st->num_rate = num;
    st->filter_len = filter_len;
    st->sinc_table = sinc_table;
    //st->resampler_ptr = my_src_common_process_direct;
#if (1) // 
    unsigned int i;
    int j;
    for (i = 0; i < den; i++)
    {
        for (j = 0; j < filter_len; j++)
        {
            st->sinc_table[i * filter_len + j] = src_sinc(st->cutoff, (((int)j - filter_len / 2 + 1) - ((float)i) / den), filter_len);
            //printf("%d,", st->sinc_table[i * filter_len + j]);//
        }
    }
#endif

}
#if __riscv
__attribute__((noinline))
#endif
void my_src_common_init_dynamic_table(MyResampleStruct_t* st, int num, int den, float cutoff, int filter_len, int oversample, short* sinc_table, int mod)
{
    st->initialised = 1;
    st->last_sample = 0;
    st->samp_frac_num = 0;
    st->cutoff = cutoff;
    st->int_advance = num / den;
    st->frac_advance = num % den;
    st->oversample = oversample;
    st->den_rate = den;
    st->num_rate = num;
    st->filter_len = filter_len;
    st->sinc_table = sinc_table;
    /* mod1: is recommended to be used when 'den' is very large.*/
    /* mod0: is direct filter mode*/
    /* In general, mod 0 is used by default for normal sample rate. If need to be changed, the size of 'sinc table' needs to be changed to (4* (OVERSAMPLE_MAX * FILTER_LEN_MAX + 8)). */
    if (mod) 
    {
        int i;
        //st->resampler_ptr = my_src_common_process_interp;
        short sinc_table_tmp[SRC_OVERSAMPLE_MAX * SRC_FILTER_LEN_MAX + 8];
        for (i = -4; i < (int)(st->oversample * st->filter_len + 4); i++)
        {
            sinc_table_tmp[i + 4] = src_sinc(st->cutoff, (i / (float)st->oversample - st->filter_len / 2), st->filter_len);
        }
        for (int offset = 0; offset < st->oversample; offset++)
        {
            for (i = 0; i < 4; i++)
            {
                for (int j = 0; j < (int)st->filter_len; j++)
                {
                    st->sinc_table[offset * 4 * st->filter_len + i * st->filter_len + j] = sinc_table_tmp[4 + (j + 1) * st->oversample - offset - 2 + i];
                }
            }
        }
        st->int_advance = st->num_rate / st->den_rate;
        st->frac_advance = st->num_rate % st->den_rate;
    }
    else
    {
        //st->resampler_ptr = my_src_common_process_direct;
        unsigned int i;
        int j;
        for (i = 0; i < den; i++)
        {
            for (j = 0; j < filter_len; j++)
            {
                st->sinc_table[i * filter_len + j] = src_sinc(st->cutoff, (((int)j - filter_len / 2 + 1) - ((float)i) / den), filter_len);
            }
        }
    }
    for (int i=0; i<SRC_FILTER_LEN_MAX + SRC_DATA_LEN_MAX; i++)
    {
    	st->src_buf_left[i] = 0;
    	st->src_buf_right[i] = 0;
    }

}

#if RESAMPLE_441_TO_16_EN
_attribute_bss_dlm_ MyResampleStruct_t	my_resample_44to16;
_attribute_bss_dlm_ static short my_src_44to16_sinc[4 * (SRC_44to16_OVERSAMPLE * SRC_44to16_FILTER_LEN + 8)];

__attribute__((noinline))
void my_resample44to16_init(void)
{
    my_src_common_init_dynamic_table(&my_resample_44to16, SRC_44to16_NUM, SRC_44to16_DEN, SRC_44to16_CUTOFF, SRC_44to16_FILTER_LEN, SRC_44to16_OVERSAMPLE, my_src_44to16_sinc, 1);
}

int my_resample44to16_data(int* ps, int n, int* pd, int stereo)
{
    unsigned int outlen;
    my_src_common_process_interp(&my_resample_44to16, (const short*)ps, n, (short*)pd, &outlen, stereo);
    return stereo ? (outlen >> 1) : outlen;
}
#endif

#if RESAMPLE_16_TO_441_EN

#if  (RESAMPLE_16_TO_441_EN == 2)
	_attribute_bss_dlm_ MyResampleStruct_t*	my_resample_16to44_ptr = 0;
#else
	_attribute_bss_dlm_ MyResampleStruct_t	my_resample_16to44_buf;
	_attribute_data_dlm_ MyResampleStruct_t*	my_resample_16to44_ptr = &my_resample_16to44_buf;
#endif


int my_resample16to44_set_buffer (void *p)
{
	my_resample_16to44_ptr = p;
	return sizeof (MyResampleStruct_t);
}

_attribute_bss_dlm_ static short my_src_16to44_sinc[4 * (SRC_16to44_OVERSAMPLE * SRC_16to44_FILTER_LEN + 8)];
#if __riscv
__attribute__((noinline))
#endif
void my_resample16to44_init(void)
{
    my_src_common_init_dynamic_table(my_resample_16to44_ptr, SRC_16to44_NUM, SRC_16to44_DEN, SRC_16to44_CUTOFF, SRC_16to44_FILTER_LEN, SRC_16to44_OVERSAMPLE, my_src_16to44_sinc,1);
}

int my_resample16to44_data(int* ps, int n, int* pd, int stereo)
{
    unsigned int outlen;
    my_src_common_process_interp(my_resample_16to44_ptr, (const short*)ps, n, (short*)pd, &outlen, stereo);
    return stereo ? (outlen >> 1) : outlen;
}
#endif

#if RESAMPLE_441_TO_48_EN
_attribute_bss_dlm_ MyResampleStruct_t	my_resample_44to48;
#if __riscv
__attribute__((noinline))
#endif
void my_resample44to48_init(void)
{
    my_src_common_init_fix_table(&my_resample_44to48, SRC_44to48_NUM, SRC_44to48_DEN, SRC_44to48_CUTOFF, SRC_44to48_FILTER_LEN, my_src_44to48_sinc);
}

int my_resample44to48_data(int* ps, int n, int* pd, int stereo)
{
    unsigned int outlen;
    my_src_common_process_direct(&my_resample_44to48, (const short*)ps, n, (short*)pd, &outlen, stereo);
    return stereo ? (outlen >> 1) : outlen;
}
#endif 

#if RESAMPLE_48_TO_441_EN
_attribute_bss_dlm_ MyResampleStruct_t	my_resample_48to44;

__attribute__((noinline))
void my_resample48to44_init(void)
{
    my_src_common_init_fix_table(&my_resample_48to44, SRC_48to44_NUM, SRC_48to44_DEN, SRC_48to44_CUTOFF, SRC_48to44_FILTER_LEN, my_src_48to44_sinc);
}

int my_resample48to44_data(int* ps, int n, int* pd, int stereo)
{
    unsigned int outlen;
    my_src_common_process_direct(&my_resample_48to44, (const short*)ps, n, (short*)pd, &outlen, stereo);
    return stereo ? (outlen >> 1) : outlen;
}

#endif 

#if RESAMPLE_16_TO_48_EN

#if  (RESAMPLE_16_TO_48_EN == 2)
	_attribute_bss_dlm_ MyResampleStruct_t*	my_resample_16to48_ptr = 0;
#else
	_attribute_bss_dlm_ MyResampleStruct_t	my_resample_16to48_buf;
	_attribute_data_dlm_ MyResampleStruct_t*	my_resample_16to48_ptr = &my_resample_16to48_buf;
#endif

int my_resample16to48_set_buffer (void *p)
{
	my_resample_16to48_ptr = p;
	return sizeof (MyResampleStruct_t);
}

__attribute__((noinline))
void my_resample16to48_init(void)
{
    my_src_common_init_dynamic_table(my_resample_16to48_ptr, SRC_16to48_NUM, SRC_16to48_DEN, SRC_16to48_CUTOFF, SRC_16to48_FILTER_LEN, SRC_16to48_OVERSAMPLE, my_src_16to48_sinc, 0);
#if 0
    MyResampleStruct_t *st = &my_resample_16to48;

    int num = SRC_16to48_NUM * 1000000;
    int den = SRC_16to48_DEN * 1000000;
    //st->int_advance = num / den;
    st->frac_advance = num % den;
    st->den_rate = den;
    st->num_rate = num;
#endif
}

__attribute__((noinline))
void my_resample8to16_init(void)
{
    my_src_common_init_dynamic_table(my_resample_16to48_ptr, LC3_8to16_NUM, LC3_8to16_DEN, LC3_8to16_CUTOFF, SRC_16to48_FILTER_LEN, SRC_16to48_OVERSAMPLE, my_src_16to48_sinc, 0);
}

void my_resample16to48_ppm(int ppm)
{
	//my_resample_16to48_ptr->int_advance = SRC_16to48_NUM*(1000000 + ppm) / (SRC_16to48_DEN*1000000);
	my_resample_16to48_ptr->frac_advance = SRC_16to48_NUM*(1000000 + ppm) % (SRC_16to48_DEN*1000000);
}

#if __riscv
__attribute__((section(".ram_code")))
#endif
int my_resample16to48_data(int* ps, int n, int* pd, int stereo)
{
    unsigned int outlen;
    my_src_common_process_direct(my_resample_16to48_ptr, (const short*)ps, n, (short*)pd, &outlen, stereo);
    return stereo ? (outlen >> 1) : outlen;
}
#endif 

#if RESAMPLE_48_TO_16_EN

#if (RESAMPLE_48_TO_16_EN == 2)
	_attribute_bss_dlm_ MyResampleStruct_t	*my_resample_48to16_ptr;
#else
	_attribute_bss_dlm_ MyResampleStruct_t my_resample_48to16_buff;
	_attribute_data_dlm_ MyResampleStruct_t	*my_resample_48to16_ptr = &my_resample_48to16_buff;
#endif

int my_resample48to16_set_buffer (void *p)
{
	my_resample_48to16_ptr = p;
	return sizeof (MyResampleStruct_t);
}

__attribute__((noinline))
void my_resample48to16_init(void)
{
    my_src_common_init_dynamic_table(my_resample_48to16_ptr, SRC_48to16_NUM, SRC_48to16_DEN, SRC_48to16_CUTOFF, SRC_48to16_FILTER_LEN, SRC_48to16_OVERSAMPLE, my_src_48to16_sinc, 0);
}

__attribute__((noinline))
void my_resample16to8_init(void)
{
    my_src_common_init_dynamic_table(my_resample_48to16_ptr, LC3_16to8_NUM, LC3_16to8_DEN, LC3_16to8_CUTOFF, SRC_48to16_FILTER_LEN, SRC_48to16_OVERSAMPLE, my_src_48to16_sinc, 0);
}

__attribute__((section(".ram_code")))
int my_resample48to16_data(int* ps, int n, int* pd, int stereo)
{
    unsigned int outlen;
    my_src_common_process_direct(my_resample_48to16_ptr, (const short*)ps, n, (short*)pd, &outlen, stereo);
    return stereo ? (outlen >> 1) : outlen;
}

__attribute__((section(".ram_code")))
int my_resample16to8_data(int* ps, int n, int* pd, int stereo)
{
	unsigned int outlen;
    my_src_common_process_direct(my_resample_48to16_ptr, (const short*)ps, n, (short*)pd, &outlen, stereo);
    return stereo ? (outlen >> 1) : outlen;
}

__attribute__((section(".ram_code")))
int my_resample8to16_data(int* ps, int n, int* pd, int stereo)
{
    unsigned int outlen;
    my_src_common_process_direct(my_resample_16to48_ptr, (const short*)ps, n, (short*)pd, &outlen, stereo);
    return stereo ? (outlen >> 1) : outlen;
}

#endif 
#endif


